{"ast":null,"code":"import { InjectionToken, NgZone, Injectable, Inject, ElementRef, Directive, Input, NgModule } from '@angular/core';\nimport { Subscriber, ReplaySubject, Subscription, BehaviorSubject } from 'rxjs';\nimport { take, switchMapTo, map, distinctUntilChanged } from 'rxjs/operators';\nimport { createDragDropManager } from 'dnd-core';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\n\nimport * as Éµngcc0 from '@angular/core';\nconst DRAG_DROP_BACKEND = new InjectionToken('dnd-core compatible backend');\n/**\n * The injection token for the dnd-core compatible backend's options.\n * @type {?}\n */\n\nconst DRAG_DROP_BACKEND_OPTIONS = new InjectionToken('options for dnd-core compatible backend');\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\n\nconst DRAG_DROP_BACKEND_DEBUG_MODE = new InjectionToken('should dnd-core run in debug mode?');\n/**\n * The injection token for the dnd-core DragDropManager\n * @type {?}\n */\n\nconst DRAG_DROP_MANAGER = new InjectionToken('dnd-core DragDropManager');\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\n\nconst DRAG_DROP_GLOBAL_CONTEXT = new InjectionToken('dnd-core context');\n/**\n * The type a source or target is given as a marker for 'you supplied null as a type',\n *  so that library consumers can be reminded to use setType/setTypes manually.\n *  See {\\@link DragSource#setType}, {\\@link DropTarget#setTypes}.\n * @type {?}\n */\n\nconst TYPE_DYNAMIC = Symbol('no type specified, you must provide one with setType/setTypes');\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} objA\n * @param {?} objB\n * @return {?}\n */\n\nfunction shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n  /** @type {?} */\n\n\n  const keysA = Object.keys(objA);\n  /** @type {?} */\n\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  } // Test for A's keys different from B.\n\n  /** @type {?} */\n\n\n  const hasOwn = Object.prototype.hasOwnProperty;\n\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n    /** @type {?} */\n\n\n    const valA = objA[keysA[i]];\n    /** @type {?} */\n\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} nextOptions\n * @param {?} currentOptions\n * @return {?}\n */\n\n\nfunction areOptionsEqual(nextOptions, currentOptions) {\n  if (currentOptions === nextOptions) {\n    return true;\n  }\n\n  return currentOptions !== null && nextOptions !== null && shallowEqual(currentOptions, nextOptions);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @template O\n */\n\n\nclass Reconnector {\n  /**\n   * @param {?} backendConnector\n   */\n  constructor(backendConnector) {\n    this.backendConnector = backendConnector;\n\n    this.reconnect =\n    /**\n    * @param {?} parentHandlerId\n    * @return {?}\n    */\n    parentHandlerId => {\n      if (this.disconnect) {\n        this.disconnect();\n        this.disconnect = null;\n      }\n\n      this.handlerId = parentHandlerId;\n\n      if (this.handlerId && this.node) {\n        this.disconnect = this.backendConnector(this.handlerId, this.node, this.options);\n      }\n    };\n\n    this.hook =\n    /**\n    * @param {?} nativeElement\n    * @param {?=} options\n    * @return {?}\n    */\n    (nativeElement, options) => {\n      if (nativeElement === this.node && areOptionsEqual(options, this.options)) {\n        return;\n      }\n\n      this.node = nativeElement;\n      this.options = options;\n      this.reconnect(this.handlerId);\n    };\n  }\n\n}\n\nif (false) {\n  /** @type {?} */\n  Reconnector.prototype.handlerId;\n  /** @type {?} */\n\n  Reconnector.prototype.node;\n  /** @type {?} */\n\n  Reconnector.prototype.options;\n  /** @type {?} */\n\n  Reconnector.prototype.disconnect;\n  /** @type {?} */\n\n  Reconnector.prototype.reconnect;\n  /** @type {?} */\n\n  Reconnector.prototype.hook;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Reconnector.prototype.backendConnector;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nclass TargetConnector {\n  /**\n   * @param {?} backend\n   */\n  constructor(backend) {\n    this.backend = backend;\n    this.dropTarget = new Reconnector(\n    /**\n    * @param {?} handlerId\n    * @param {?} node\n    * @param {?} options\n    * @return {?}\n    */\n    (handlerId, node, options) => {\n      return this.backend.connectDropTarget(handlerId, node, options);\n    });\n    this.hooks = {\n      dropTarget: this.dropTarget.hook\n    };\n  }\n  /**\n   * @param {?} handlerId\n   * @return {?}\n   */\n\n\n  receiveHandlerId(handlerId) {\n    if (handlerId === this.currentHandlerId) {\n      return;\n    }\n\n    this.currentHandlerId = handlerId;\n    this.dropTarget.reconnect(handlerId);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  reconnect() {\n    this.dropTarget.reconnect(this.currentHandlerId);\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  TargetConnector.prototype.currentHandlerId;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  TargetConnector.prototype.dropTarget;\n  /** @type {?} */\n\n  TargetConnector.prototype.hooks;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  TargetConnector.prototype.backend;\n}\n/**\n * @param {?} backend\n * @return {?}\n */\n\n\nfunction createTargetConnector(backend) {\n  return new TargetConnector(backend);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} type\n * @param {?} target\n * @param {?} manager\n * @return {?}\n */\n\n\nfunction registerTarget(type, target, manager) {\n  /** @type {?} */\n  const registry = manager.getRegistry();\n  /** @type {?} */\n\n  const targetId = registry.addTarget(type, target);\n  /**\n   * @return {?}\n   */\n\n  function unregisterTarget() {\n    registry.removeTarget(targetId);\n  }\n\n  return {\n    handlerId: targetId,\n    unregister: unregisterTarget\n  };\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @record\n * @template TConnector\n */\n\n\nfunction Connector() {}\n\nif (false) {\n  /** @type {?} */\n  Connector.prototype.hooks;\n  /**\n   * @param {?} handlerId\n   * @return {?}\n   */\n\n  Connector.prototype.receiveHandlerId = function (handlerId) {};\n  /**\n   * @return {?}\n   */\n\n\n  Connector.prototype.reconnect = function () {};\n}\n\nclass SourceConnector {\n  /**\n   * @param {?} backend\n   */\n  constructor(backend) {\n    this.backend = backend;\n    this.dragSource = new Reconnector(\n    /**\n    * @param {?} handlerId\n    * @param {?} node\n    * @param {?} options\n    * @return {?}\n    */\n    (handlerId, node, options) => {\n      return this.backend.connectDragSource(handlerId, node, options);\n    });\n    this.dragPreview = new Reconnector(\n    /**\n    * @param {?} handlerId\n    * @param {?} node\n    * @param {?} options\n    * @return {?}\n    */\n    (handlerId, node, options) => {\n      return this.backend.connectDragPreview(handlerId, node, options);\n    });\n    this.hooks = {\n      dragSource: this.dragSource.hook,\n      dragPreview: this.dragPreview.hook\n    };\n  }\n  /**\n   * @param {?} handlerId\n   * @return {?}\n   */\n\n\n  receiveHandlerId(handlerId) {\n    if (handlerId === this.currentHandlerId) {\n      return;\n    }\n\n    this.currentHandlerId = handlerId;\n    this.dragSource.reconnect(handlerId);\n    this.dragPreview.reconnect(handlerId);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  reconnect() {\n    this.dragSource.reconnect(this.currentHandlerId);\n    this.dragPreview.reconnect(this.currentHandlerId);\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  SourceConnector.prototype.currentHandlerId;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  SourceConnector.prototype.dragSource;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  SourceConnector.prototype.dragPreview;\n  /** @type {?} */\n\n  SourceConnector.prototype.hooks;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  SourceConnector.prototype.backend;\n}\n/**\n * @param {?} backend\n * @return {?}\n */\n\n\nfunction createSourceConnector(backend) {\n  return new SourceConnector(backend);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} type\n * @param {?} source\n * @param {?} manager\n * @return {?}\n */\n\n\nfunction registerSource(type, source, manager) {\n  /** @type {?} */\n  const registry = manager.getRegistry();\n  /** @type {?} */\n\n  const sourceId = registry.addSource(type, source);\n  /**\n   * @return {?}\n   */\n\n  function unregisterSource() {\n    registry.removeSource(sourceId);\n  }\n\n  return {\n    handlerId: sourceId,\n    unregister: unregisterSource\n  };\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} assertion\n * @param {?} msg\n * @return {?}\n */\n\n\nfunction invariant(assertion, msg) {\n  if (!assertion) {\n    throw new Error(msg);\n  }\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\n\n\nfunction areCollectsEqual(a, b) {\n  if (a == null || b == null) {\n    return false;\n  }\n\n  if (typeof a !== 'object' || typeof b !== 'object') {\n    return a === b;\n  }\n\n  return shallowEqual(a, b);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @ignore\n * This is an RxJS operator to schedule a microtask just after all\n * the synchronous subscribers have been processed.\n * It's useful because we use `microTasks !== 0` to determine when we are finished\n * processing all the listeners and are ready for Angular to perform change detection.\n * @template T\n * @param {?} zone\n * @param {?=} uTask\n * @return {?}\n */\n\n\nfunction scheduleMicroTaskAfter(zone, uTask) {\n  return (\n    /**\n    * @param {?} source\n    * @return {?}\n    */\n    source => {\n      return source.lift(new RunInZoneOperator(zone, uTask));\n    }\n  );\n}\n/**\n * @ignore\n * @template T\n */\n\n\nclass ZoneSubscriber extends Subscriber {\n  /**\n   * @param {?} destination\n   * @param {?} zone\n   * @param {?=} uTask\n   */\n  constructor(destination, zone, uTask =\n  /**\n  * @return {?}\n  */\n  () => {}) {\n    super(destination);\n    this.zone = zone;\n    this.uTask = uTask;\n  }\n  /**\n   * @protected\n   * @param {?} val\n   * @return {?}\n   */\n\n\n  _next(val) {\n    this.destination.next && this.destination.next(val);\n    this.zone.scheduleMicroTask('ZoneSubscriber', this.uTask);\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  ZoneSubscriber.prototype.zone;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  ZoneSubscriber.prototype.uTask;\n}\n/**\n * @ignore\n * @template T, R\n */\n\n\nclass RunInZoneOperator {\n  /**\n   * @param {?} zone\n   * @param {?=} uTask\n   */\n  constructor(zone, uTask) {\n    this.zone = zone;\n    this.uTask = uTask;\n  }\n  /**\n   * @param {?} subscriber\n   * @param {?} source\n   * @return {?}\n   */\n\n\n  call(subscriber, source) {\n    return source.subscribe(new ZoneSubscriber(subscriber, this.zone, this.uTask));\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  RunInZoneOperator.prototype.zone;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  RunInZoneOperator.prototype.uTask;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @record\n * @template TMonitor, TConnector\n */\n\n\nfunction FactoryArgs() {}\n\nif (false) {\n  /** @type {?} */\n  FactoryArgs.prototype.createHandler;\n  /** @type {?} */\n\n  FactoryArgs.prototype.createMonitor;\n  /** @type {?} */\n\n  FactoryArgs.prototype.createConnector;\n  /** @type {?} */\n\n  FactoryArgs.prototype.registerHandler;\n}\n/**\n * @template TMonitor, TConnector\n */\n\n\nclass Connection {\n  /**\n   * @param {?} factoryArgs\n   * @param {?} manager\n   * @param {?} skyhookZone\n   * @param {?} initialType\n   */\n  constructor(factoryArgs, manager, skyhookZone, initialType) {\n    this.factoryArgs = factoryArgs;\n    this.manager = manager;\n    this.skyhookZone = skyhookZone;\n    /**\n     * A subject basically used to kick off any observables waiting for a type to be set via setType/setTypes\n     */\n\n    this.resolvedType$ = new ReplaySubject(1);\n    /**\n     * This one lives exactly as long as the connection.\n     * It is responsible for disposing of the handlerConnector, and any internal listen() subscriptions.\n     */\n\n    this.subscriptionConnectionLifetime = new Subscription();\n\n    this.onUpdate =\n    /**\n    * @return {?}\n    */\n    () => {\n      this.handlerConnector.reconnect();\n    };\n\n    this.handleChange =\n    /**\n    * @return {?}\n    */\n    () => {\n      this.collector$.next(this.handlerMonitor);\n    };\n\n    invariant(typeof manager === 'object', // TODO: update this mini-documentation\n    'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to wrap the top-level component of your app with DragDropContext. ' // tslint:disable-next-line:max-line-length\n    // 'Read more: ',\n    );\n    NgZone.assertNotInAngularZone();\n    this.handlerMonitor = this.factoryArgs.createMonitor(this.manager);\n    this.collector$ = new BehaviorSubject(this.handlerMonitor);\n    this.handler = this.factoryArgs.createHandler(this.handlerMonitor);\n    this.handlerConnector = this.factoryArgs.createConnector(this.manager.getBackend()); // handlerConnector lives longer than any per-type subscription\n\n    this.subscriptionConnectionLifetime.add(\n    /**\n    * @return {?}\n    */\n    () => this.handlerConnector.receiveHandlerId(null));\n\n    if (initialType && initialType !== TYPE_DYNAMIC) {\n      this.setTypes(initialType);\n    }\n  }\n  /**\n   * @template P\n   * @param {?} mapFn\n   * @return {?}\n   */\n\n\n  listen(mapFn) {\n    // Listeners are generally around as long as the connection.\n    // This isn't 100% true, but there is no way of knowing (even if you ref-count it)\n    // when a component no longer needs it.\n    return this.resolvedType$.pipe( // this ensures we don't start emitting values until there is a type resolved\n    take(1), // switch our attention to the incoming firehose of 'something changed' events\n    switchMapTo(this.collector$), // turn them into 'interesting state' via the monitor and a user-provided function\n    map(mapFn), // don't emit EVERY time the firehose says something changed, only when the interesting state changes\n    distinctUntilChanged(areCollectsEqual), // this schedules a single batch change detection run after all the listeners have heard their newest value\n    // thus all changes resulting from subscriptions to this are caught by the\n    // change detector.\n    scheduleMicroTaskAfter(this.skyhookZone, this.onUpdate));\n  }\n  /**\n   * @param {?} fn\n   * @return {?}\n   */\n\n\n  connect(fn) {\n    /** @type {?} */\n    const subscription = this.resolvedType$.pipe(take(1)).subscribe(\n    /**\n    * @return {?}\n    */\n    () => {\n      // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n      // will cause change detection (via executing a macro or event task)\n      this.skyhookZone.run(\n      /**\n      * @return {?}\n      */\n      () => {\n        fn(this.handlerConnector.hooks);\n      });\n    }); // now chain this onto the connection's unsubscribe call.\n    // just in case you destroy your component before setting a type on anything\n    // i.e.:\n    // conn without a type\n    //     source = this.dnd.dragSource(null, { ... })\n    // manually connect to the DOM, which won't handle the returned subscription like the directive does\n    //     ngAfterViewInit() { this.source.connectDragSource(this.myDiv.nativeElement); }\n    // never set a type\n    // then destroy your component, the source, but not the connection request.\n    //     ngOnDestroy() { this.source.unsubscribe(); }\n    //\n    // without this, you would have a hanging resolvedType$.pipe(take(1)) subscription\n    // with this, it dies with the source's unsubscribe call.\n    //\n    // doesn't need this.subscriptionTypeLifetime, because pipe(take(1)) already does that\n\n    this.subscriptionConnectionLifetime.add(subscription);\n    return subscription;\n  }\n  /**\n   * @param {?} node\n   * @return {?}\n   */\n\n\n  connectDropTarget(node) {\n    return this.connect(\n    /**\n    * @param {?} c\n    * @return {?}\n    */\n    c =>\n    /** @type {?} */\n\n    /** @type {?} */\n    c.dropTarget(node));\n  }\n  /**\n   * @param {?} node\n   * @param {?} options\n   * @return {?}\n   */\n\n\n  connectDragSource(node, options) {\n    return this.connect(\n    /**\n    * @param {?} c\n    * @return {?}\n    */\n    c =>\n    /** @type {?} */\n\n    /** @type {?} */\n    c.dragSource(node, options));\n  }\n  /**\n   * @param {?} node\n   * @param {?} options\n   * @return {?}\n   */\n\n\n  connectDragPreview(node, options) {\n    return this.connect(\n    /**\n    * @param {?} c\n    * @return {?}\n    */\n    c =>\n    /** @type {?} */\n\n    /** @type {?} */\n    c.dragPreview(node, options));\n  }\n  /**\n   * @param {?} type\n   * @return {?}\n   */\n\n\n  setTypes(type) {\n    // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n    // will cause change detection (via executing a macro or event task)\n    this.skyhookZone.run(\n    /**\n    * @return {?}\n    */\n    () => {\n      this.receiveType(type);\n      this.resolvedType$.next(1);\n    });\n  }\n  /**\n   * @param {?} type\n   * @return {?}\n   */\n\n\n  setType(type) {\n    this.setTypes(type);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getHandlerId() {\n    return this.handlerId;\n  }\n  /**\n   * @param {?} type\n   * @return {?}\n   */\n\n\n  receiveType(type) {\n    if (type === this.currentType) {\n      return;\n    }\n\n    NgZone.assertNotInAngularZone();\n    this.currentType = type;\n\n    if (this.subscriptionTypeLifetime) {\n      this.subscriptionTypeLifetime.unsubscribe();\n    } // console.debug('subscribed to ' + type.toString());\n\n\n    this.subscriptionTypeLifetime = new Subscription();\n    const {\n      handlerId,\n      unregister\n    } = this.factoryArgs.registerHandler(type, this.handler, this.manager);\n    this.handlerId = handlerId;\n    this.handlerMonitor.receiveHandlerId(handlerId);\n    this.handlerConnector.receiveHandlerId(handlerId);\n    /** @type {?} */\n\n    const globalMonitor = this.manager.getMonitor();\n    /** @type {?} */\n\n    const unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n      handlerIds: [handlerId]\n    });\n    this.subscriptionTypeLifetime.add(unsubscribe);\n    this.subscriptionTypeLifetime.add(unregister); // this.subscriptionTypeLifetime.add(() => console.debug(\"unsubscribed from \" + type.toString()));\n  }\n  /**\n   * @return {?}\n   */\n\n\n  unsubscribe() {\n    if (this.subscriptionTypeLifetime) {\n      this.subscriptionTypeLifetime.unsubscribe();\n    }\n\n    this.subscriptionConnectionLifetime.unsubscribe();\n  }\n  /**\n   * @param {?} teardown\n   * @return {?}\n   */\n\n\n  add(teardown) {\n    return this.subscriptionConnectionLifetime.add(teardown);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  get closed() {\n    return this.subscriptionConnectionLifetime && this.subscriptionConnectionLifetime.closed;\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  Connection.prototype.handlerMonitor;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.handlerConnector;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.handler;\n  /**\n   * The stream of all change events from the internal subscription's handleChange\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.collector$;\n  /**\n   * A subject basically used to kick off any observables waiting for a type to be set via setType/setTypes\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.resolvedType$;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.currentType;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.handlerId;\n  /**\n   * This one is created and destroyed once per type or list of types.\n   * Because each time we change the type, we unsubscribe from the global state storage and\n   * re-subscribe with the new type.\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.subscriptionTypeLifetime;\n  /**\n   * This one lives exactly as long as the connection.\n   * It is responsible for disposing of the handlerConnector, and any internal listen() subscriptions.\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.subscriptionConnectionLifetime;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.onUpdate;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.handleChange;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.factoryArgs;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.manager;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Connection.prototype.skyhookZone;\n}\n/**\n * @record\n * @template Item, DropResult\n */\n\n\nfunction SourceConstructor() {}\n/**\n * @record\n */\n\n\nfunction TargetConstructor() {}\n/** @type {?} */\n\n\nconst TargetConnection =\n/** @type {?} */\nConnection;\n/** @type {?} */\n\nconst SourceConnection =\n/** @type {?} */\nConnection;\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nclass DragLayerConnectionClass {\n  /**\n   * @param {?} manager\n   * @param {?} zone\n   */\n  constructor(manager, zone) {\n    this.manager = manager;\n    this.zone = zone;\n    this.subscription = new Subscription();\n    this.isTicking = false;\n\n    this.handleStateChange =\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const monitor =\n      /** @type {?} */\n      this.manager.getMonitor();\n      this.collector$.next(monitor);\n    };\n\n    this.handleOffsetChange =\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const monitor =\n      /** @type {?} */\n      this.manager.getMonitor();\n      this.collector$.next(monitor);\n    };\n    /** @type {?} */\n\n\n    const monitor = this.manager.getMonitor();\n    this.collector$ = new BehaviorSubject(monitor);\n    this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleOffsetChange);\n    this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleStateChange);\n    this.subscription.add(\n    /**\n    * @return {?}\n    */\n    () => {\n      this.unsubscribeFromOffsetChange();\n      this.unsubscribeFromStateChange();\n    });\n    this.handleStateChange();\n  }\n  /**\n   * @template P\n   * @param {?} mapFn\n   * @return {?}\n   */\n\n\n  listen(mapFn) {\n    return this.collector$.pipe(map(mapFn), distinctUntilChanged(areCollectsEqual), scheduleMicroTaskAfter(this.zone));\n  }\n  /**\n   * @return {?}\n   */\n\n\n  unsubscribe() {\n    this.collector$.complete();\n    this.subscription.unsubscribe();\n  }\n  /**\n   * @param {?} teardown\n   * @return {?}\n   */\n\n\n  add(teardown) {\n    return this.subscription.add(teardown);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  get closed() {\n    return this.subscription.closed;\n  }\n\n}\n\nif (false) {\n  /** @type {?} */\n  DragLayerConnectionClass.prototype.unsubscribeFromOffsetChange;\n  /** @type {?} */\n\n  DragLayerConnectionClass.prototype.unsubscribeFromStateChange;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.collector$;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.subscription;\n  /** @type {?} */\n\n  DragLayerConnectionClass.prototype.isTicking;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.handleStateChange;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.handleOffsetChange;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.manager;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DragLayerConnectionClass.prototype.zone;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\n\nlet isCallingCanDrag = false;\n/** @type {?} */\n\nlet isCallingIsDragging = false;\n\nclass DragSourceMonitorClass {\n  /**\n   * @param {?} manager\n   */\n  constructor(manager) {\n    this.internalMonitor = manager.getMonitor();\n  }\n  /**\n   * @param {?} sourceId\n   * @return {?}\n   */\n\n\n  receiveHandlerId(sourceId) {\n    this.sourceId = sourceId;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  canDrag() {\n    invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html');\n\n    try {\n      isCallingCanDrag = true;\n      return this.internalMonitor.canDragSource(this.sourceId);\n    } finally {\n      isCallingCanDrag = false;\n    }\n  }\n  /**\n   * @return {?}\n   */\n\n\n  isDragging() {\n    invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html');\n\n    try {\n      isCallingIsDragging = true;\n      return this.internalMonitor.isDraggingSource(this.sourceId);\n    } finally {\n      isCallingIsDragging = false;\n    }\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getItemType() {\n    return this.internalMonitor.getItemType();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getItem() {\n    return this.internalMonitor.getItem();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getDropResult() {\n    return this.internalMonitor.getDropResult();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  didDrop() {\n    return this.internalMonitor.didDrop();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getInitialClientOffset() {\n    return this.internalMonitor.getInitialClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getInitialSourceClientOffset() {\n    return this.internalMonitor.getInitialSourceClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getSourceClientOffset() {\n    return this.internalMonitor.getSourceClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getClientOffset() {\n    return this.internalMonitor.getClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getDifferenceFromInitialOffset() {\n    return this.internalMonitor.getDifferenceFromInitialOffset();\n  }\n\n}\n\nif (false) {\n  /** @type {?} */\n  DragSourceMonitorClass.prototype.internalMonitor;\n  /** @type {?} */\n\n  DragSourceMonitorClass.prototype.sourceId;\n}\n/**\n * @param {?} manager\n * @return {?}\n */\n\n\nfunction createSourceMonitor(manager) {\n  return new DragSourceMonitorClass(manager);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nclass Target {\n  /**\n   * @param {?} spec\n   * @param {?} zone\n   * @param {?} monitor\n   */\n  constructor(spec, zone, monitor) {\n    this.spec = spec;\n    this.zone = zone;\n    this.monitor = monitor;\n    this.monitor = monitor;\n  }\n  /**\n   * @template T\n   * @param {?} fn\n   * @return {?}\n   */\n\n\n  withChangeDetection(fn) {\n    /** @type {?} */\n    let x = fn();\n    this.zone.scheduleMicroTask('DropTarget',\n    /**\n    * @return {?}\n    */\n    () => {});\n    return x;\n  }\n  /**\n   * @param {?} monitor\n   * @return {?}\n   */\n\n\n  receiveMonitor(monitor) {\n    this.monitor = monitor;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  canDrop() {\n    if (!this.spec.canDrop) {\n      return true;\n    } // don't run isDragging in the zone. Should be a pure function of `this`.\n\n\n    return this.spec.canDrop(this.monitor);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  hover() {\n    if (!this.spec.hover) {\n      return;\n    }\n\n    this.withChangeDetection(\n    /**\n    * @return {?}\n    */\n    () => {\n      this.spec.hover && this.spec.hover(this.monitor);\n    });\n  }\n  /**\n   * @return {?}\n   */\n\n\n  drop() {\n    if (!this.spec.drop) {\n      return undefined;\n    }\n\n    return this.withChangeDetection(\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const dropResult = this.spec.drop && this.spec.drop(this.monitor);\n      return dropResult;\n    });\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  Target.prototype.spec;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Target.prototype.zone;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Target.prototype.monitor;\n}\n/**\n * @param {?} spec\n * @param {?} zone\n * @return {?}\n */\n\n\nfunction createTargetFactory(spec, zone) {\n  return (\n    /**\n    * @param {?} monitor\n    * @return {?}\n    */\n    function createTarget(monitor) {\n      return new Target(spec, zone, monitor);\n    }\n  );\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\n\nlet isCallingCanDrop = false;\n\nclass DropTargetMonitorClass {\n  /**\n   * @param {?} manager\n   */\n  constructor(manager) {\n    this.internalMonitor = manager.getMonitor();\n  }\n  /**\n   * @param {?} targetId\n   * @return {?}\n   */\n\n\n  receiveHandlerId(targetId) {\n    this.targetId = targetId;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  canDrop() {\n    invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html');\n\n    try {\n      isCallingCanDrop = true;\n      return this.internalMonitor.canDropOnTarget(this.targetId);\n    } finally {\n      isCallingCanDrop = false;\n    }\n  }\n  /**\n   * @param {?=} options\n   * @return {?}\n   */\n\n\n  isOver(options = {\n    shallow: false\n  }) {\n    return this.internalMonitor.isOverTarget(this.targetId, options);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getItemType() {\n    return this.internalMonitor.getItemType();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getItem() {\n    return this.internalMonitor.getItem();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getDropResult() {\n    return this.internalMonitor.getDropResult();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  didDrop() {\n    return this.internalMonitor.didDrop();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getInitialClientOffset() {\n    return this.internalMonitor.getInitialClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getInitialSourceClientOffset() {\n    return this.internalMonitor.getInitialSourceClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getSourceClientOffset() {\n    return this.internalMonitor.getSourceClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getClientOffset() {\n    return this.internalMonitor.getClientOffset();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  getDifferenceFromInitialOffset() {\n    return this.internalMonitor.getDifferenceFromInitialOffset();\n  }\n\n}\n\nif (false) {\n  /** @type {?} */\n  DropTargetMonitorClass.prototype.internalMonitor;\n  /** @type {?} */\n\n  DropTargetMonitorClass.prototype.targetId;\n}\n/**\n * @param {?} manager\n * @return {?}\n */\n\n\nfunction createTargetMonitor(manager) {\n  return new DropTargetMonitorClass(manager);\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nclass Source {\n  /**\n   * @param {?} spec\n   * @param {?} zone\n   * @param {?} monitor\n   */\n  constructor(spec, zone, monitor) {\n    this.spec = spec;\n    this.zone = zone;\n    this.monitor = monitor;\n  }\n  /**\n   * @template T\n   * @param {?} fn\n   * @return {?}\n   */\n\n\n  withChangeDetection(fn) {\n    /** @type {?} */\n    let x = fn();\n    this.zone.scheduleMicroTask('DragSource',\n    /**\n    * @return {?}\n    */\n    () => {});\n    return x;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  canDrag() {\n    if (!this.spec.canDrag) {\n      return true;\n    }\n\n    return this.withChangeDetection(\n    /**\n    * @return {?}\n    */\n    () => {\n      return this.spec.canDrag && this.spec.canDrag(this.monitor) || false;\n    });\n  }\n  /**\n   * @param {?} globalMonitor\n   * @param {?} sourceId\n   * @return {?}\n   */\n\n\n  isDragging(globalMonitor, sourceId) {\n    if (!this.spec.isDragging) {\n      return sourceId === globalMonitor.getSourceId();\n    }\n\n    return this.spec.isDragging(this.monitor);\n  }\n  /**\n   * @return {?}\n   */\n\n\n  beginDrag() {\n    return this.withChangeDetection(\n    /**\n    * @return {?}\n    */\n    () => {\n      return this.spec.beginDrag(this.monitor);\n    });\n  }\n  /**\n   * @return {?}\n   */\n\n\n  endDrag() {\n    if (!this.spec.endDrag) {\n      return;\n    }\n\n    return this.withChangeDetection(\n    /**\n    * @return {?}\n    */\n    () => {\n      if (this.spec.endDrag) {\n        this.spec.endDrag(this.monitor);\n      }\n    });\n  }\n\n}\n\nif (false) {\n  /**\n   * @type {?}\n   * @private\n   */\n  Source.prototype.spec;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Source.prototype.zone;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  Source.prototype.monitor;\n}\n/**\n * @param {?} spec\n * @param {?} zone\n * @return {?}\n */\n\n\nfunction createSourceFactory(spec, zone) {\n  return (\n    /**\n    * @param {?} monitor\n    * @return {?}\n    */\n    function createSource(monitor) {\n      return new Source(spec, zone, monitor);\n    }\n  );\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * Represents an RxJS Subscription, with multi-version compatibility.\n * The standard SubscriptionLike does not contain an add() method.\n * @record\n */\n\n\nfunction AddSubscription() {}\n\nif (false) {\n  /**\n   * Same as RxJS `Subscription#add`\n   * @param {?} teardownLogic\n   * @return {?}\n   */\n  AddSubscription.prototype.add = function (teardownLogic) {};\n}\n/**\n * For a simple component, unsubscribing is as easy as `connection.unsubscribe()` in `ngOnDestroy()`\n *  If your components have lots of subscriptions, it can get tedious having to\n *  unsubscribe from all of them, and you might forget. A common pattern is to create an RxJS Subscription\n *  (maybe called `destroy`), to use `this.destroy.add(xxx.subscribe(...))`\n *  and to call `destroy.unsubscribe()` once to clean up all of them. \\@angular-skyhook/core\n *  supports this pattern with by using the `subscription` parameter on the\n *  constructors. Simply:\n *\n * ```typescript\n * import { Subscription } from 'rxjs';\n * // ...\n * destroy = new Subscription();\n * target = this.dnd.dropTarget({\n * // ...\n * }, this.destroy);\n * ngOnDestroy() { this.destroy.unsubscribe(); }\n * ```\n *\n * It is a good habit for avoiding leaked subscriptions, because .\n */\n\n\nclass SkyhookDndService {\n  /**\n   * @ignore\n   * @param {?} manager\n   * @param {?} ngZone\n   */\n  constructor(manager, ngZone) {\n    this.manager = manager;\n    this.ngZone = ngZone;\n    /**\n     * @ignore\n     */\n\n    this.skyhookZone = Zone.root.fork({\n      name: \"skyhookZone\",\n      onHasTask:\n      /**\n      * @param {?} _parentZoneDelegate\n      * @param {?} _currentZone\n      * @param {?} _targetZone\n      * @param {?} state\n      * @return {?}\n      */\n      (_parentZoneDelegate, _currentZone, _targetZone, state) => {\n        // when we've | drained the microTask queue; or                    | ... run a change detection cycle.\n        //            | executed or cancelled a macroTask (eg a timer); or |\n        //            | handled an event                                   |\n        // note: we must use ngZone.run() instead of ApplicationRef.tick()\n        // this is because\n        // 1. this callback runs outside the angular zone\n        // 2. therefore if you use appRef.tick(), the event handlers set up during the tick() are\n        //    not in the angular zone, even though anything set up during tick() should be\n        // 3. therefore you get regular (click) handlers from templates running in skyhookZone\n        //    and not causing change detection\n        // Also, now we watch for macroTasks as well.\n        // This means if we set up timers in the skyhook zone, they will fire and cause change\n        // detection. Useful if doing .listen(...).delay(1000) and the resulting asynchronous\n        // subscribers.\n        // Appropriately, we run more setup handlers in skyhookZone now.\n        //\n        // Proper event handlers (set up by the backend) don't trigger any, because skyhookZone\n        // only cares about # of handlers changing => 0. But if we care about them, it will be\n        // through listen(), updates to which will schedule a microTask.\n        if (!state[state.change]) {\n          this.ngZone.run(\n          /**\n          * @return {?}\n          */\n          () => {// noop, but causes change detection (i.e. onLeave)\n          });\n        }\n      } // onInvokeTask: (zoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) => {\n      // }\n      // onScheduleTask(parentZoneDelegate, currentZone, targetZone, task) {\n      //   return parentZoneDelegate.scheduleTask(targetZone, task);\n      // },\n      // onInvoke: (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) => {\n      // }\n\n    });\n  }\n  /**\n   * This drop target will only react to the items produced by the drag sources\n   * of the specified type or types.\n   *\n   * If you want a dynamic type, pass `null` as the type; and call\n   * {\\@link DropTarget#setTypes} in a lifecycle hook.\n   * @template Item, DropResult\n   * @param {?} types\n   * @param {?} spec\n   * @param {?=} subscription\n   * @return {?}\n   */\n\n\n  dropTarget(types, spec, subscription) {\n    // return this.ngZone.runOutsideAngular(() => {\n    return this.skyhookZone.run(\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const createTarget = createTargetFactory(spec, this.skyhookZone);\n      /** @type {?} */\n\n      const conn = new TargetConnection({\n        createHandler: createTarget,\n        registerHandler: registerTarget,\n        createMonitor: createTargetMonitor,\n        createConnector: createTargetConnector\n      }, this.manager, this.skyhookZone, types || TYPE_DYNAMIC);\n\n      if (subscription) {\n        subscription.add(conn);\n      }\n\n      return conn;\n    });\n  }\n  /**\n   * This method creates a {\\@link DragSource} object. It represents a drag\n   *  source and its behaviour, and can be connected to a DOM element by\n   *  assigning it to the `[dragSource]` directive on that element in your\n   *  template.\n   *\n   * It is the corollary of [`react-dnd`'s\n   * `DragSource`](http://react-dnd.github.io/react-dnd/docs-drag-source.html).\n   *\n   * The `spec` argument ({\\@link DragSourceSpec}) is a set of _queries_ and\n   * _callbacks_ that are called at appropriate times by the internals. The\n   * queries are for asking your component whether to drag/listen and what\n   * item data to hoist up; the callback (just 1) is for notifying you when\n   * the drag ends.\n   *\n   * Only the drop targets registered for the same type will\n   * react to the items produced by this drag source. If you want a dynamic\n   * type, pass `null` as the type; and call {\\@link DragSource#setType} in\n   * a lifecycle hook.\n   *\n   * @template Item, DropResult\n   * @param {?} type\n   * @param {?} spec\n   * @param {?=} subscription An RxJS Subscription to tie the lifetime of the\n   * connection to.\n   * @return {?}\n   */\n\n\n  dragSource(type, spec, subscription) {\n    // return this.ngZone.runOutsideAngular(() => {\n    return this.skyhookZone.run(\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const createSource = createSourceFactory(spec, this.skyhookZone);\n      /** @type {?} */\n\n      const conn = new SourceConnection({\n        createHandler: createSource,\n        registerHandler: registerSource,\n        createMonitor: createSourceMonitor,\n        createConnector: createSourceConnector\n      }, this.manager, this.skyhookZone, type || TYPE_DYNAMIC);\n\n      if (subscription) {\n        subscription.add(conn);\n      }\n\n      return conn;\n    });\n  }\n  /**\n   * This method creates a {\\@link DragLayer} object\n   * @template Item\n   * @param {?=} subscription\n   * @return {?}\n   */\n\n\n  dragLayer(subscription) {\n    // return this.ngZone.runOutsideAngular(() => {\n    return this.skyhookZone.run(\n    /**\n    * @return {?}\n    */\n    () => {\n      /** @type {?} */\n      const conn = new DragLayerConnectionClass(this.manager, this.skyhookZone);\n\n      if (subscription) {\n        subscription.add(conn);\n      }\n\n      return conn;\n    });\n  }\n\n}\n\nSkyhookDndService.Éµfac = function SkyhookDndService_Factory(t) {\n  return new (t || SkyhookDndService)(Éµngcc0.ÉµÉµinject(DRAG_DROP_MANAGER), Éµngcc0.ÉµÉµinject(Éµngcc0.NgZone));\n};\n\nSkyhookDndService.Éµprov = /*@__PURE__*/Éµngcc0.ÉµÉµdefineInjectable({\n  token: SkyhookDndService,\n  factory: SkyhookDndService.Éµfac\n});\n/** @nocollapse */\n\nSkyhookDndService.ctorParameters = () => [{\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [DRAG_DROP_MANAGER]\n  }]\n}, {\n  type: NgZone\n}];\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(SkyhookDndService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DRAG_DROP_MANAGER]\n      }]\n    }, {\n      type: Éµngcc0.NgZone\n    }];\n  }, null);\n})();\n\nif (false) {\n  /**\n   * @ignore\n   * @type {?}\n   * @private\n   */\n  SkyhookDndService.prototype.skyhookZone;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  SkyhookDndService.prototype.manager;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  SkyhookDndService.prototype.ngZone;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @ignore\n * @type {?}\n */\n\n\nconst explanation = 'You can only pass exactly one connection object to [dropTarget]. ' + 'There is only one of each source/target/preview allowed per DOM element.';\n/**\n * @ignore\n * @abstract\n */\n\nclass DndDirective {\n  /**\n   * @ignore\n   * @param {?} elRef\n   * @param {?} zone\n   */\n  constructor(elRef, zone) {\n    this.elRef = elRef;\n    this.zone = zone;\n    this.deferredRequest = new Subscription();\n  }\n  /**\n   * @protected\n   * @return {?}\n   */\n\n\n  ngOnChanges() {\n    invariant(typeof this.connection === 'object' && !Array.isArray(this.connection), explanation);\n    this.zone.runOutsideAngular(\n    /**\n    * @return {?}\n    */\n    () => {\n      // discard an unresolved connection request\n      // in the case where the previous one succeeded, deferredRequest is\n      // already closed.\n      this.deferredRequest.unsubscribe(); // replace it with a new one\n\n      if (this.connection) {\n        this.deferredRequest = this.callHooks(this.connection);\n      }\n    });\n  }\n  /**\n   * @protected\n   * @return {?}\n   */\n\n\n  ngOnDestroy() {\n    this.deferredRequest.unsubscribe();\n  }\n\n}\n\nDndDirective.Éµfac = function DndDirective_Factory(t) {\n  return new (t || DndDirective)(Éµngcc0.ÉµÉµinject(Éµngcc0.ElementRef), Éµngcc0.ÉµÉµinject(Éµngcc0.NgZone));\n};\n\nDndDirective.Éµprov = /*@__PURE__*/Éµngcc0.ÉµÉµdefineInjectable({\n  token: DndDirective,\n  factory: DndDirective.Éµfac\n});\nDndDirective.Éµdir = /*@__PURE__*/Éµngcc0.ÉµÉµdefineDirective({\n  type: DndDirective,\n  features: [Éµngcc0.ÉµÉµNgOnChangesFeature]\n});\n/** @nocollapse */\n\nDndDirective.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: NgZone\n}];\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DndDirective, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Éµngcc0.ElementRef\n    }, {\n      type: Éµngcc0.NgZone\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DndDirective, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Éµngcc0.ElementRef\n    }, {\n      type: Éµngcc0.NgZone\n    }];\n  }, null);\n})();\n\nif (false) {\n  /**\n   * @type {?}\n   * @protected\n   */\n  DndDirective.prototype.connection;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DndDirective.prototype.deferredRequest;\n  /**\n   * @type {?}\n   * @protected\n   */\n\n  DndDirective.prototype.elRef;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  DndDirective.prototype.zone;\n  /**\n   * @abstract\n   * @protected\n   * @param {?} conn\n   * @return {?}\n   */\n\n  DndDirective.prototype.callHooks = function (conn) {};\n} // Note: the T | undefined everywhere is from https://github.com/angular/angular-cli/issues/2034\n\n/**\n * Allows you to connect a {\\@link DropTarget} to an element in a component template.\n */\n\n\nclass DropTargetDirective extends DndDirective {\n  /**\n   * Reduce typo confusion by allowing non-plural version of dropTargetTypes\n   * @param {?} t\n   * @return {?}\n   */\n  set dropTargetType(t) {\n    this.dropTargetTypes = t;\n  }\n  /**\n   * @protected\n   * @return {?}\n   */\n\n\n  ngOnChanges() {\n    this.connection = this.dropTarget;\n\n    if (this.connection && this.dropTargetTypes != null) {\n      this.connection.setTypes(this.dropTargetTypes);\n    }\n\n    super.ngOnChanges();\n  }\n  /**\n   * @protected\n   * @param {?} conn\n   * @return {?}\n   */\n\n\n  callHooks(conn) {\n    return conn.connectDropTarget(this.elRef.nativeElement);\n  }\n\n}\n\nDropTargetDirective.Éµfac = /*@__PURE__*/function () {\n  let ÉµDropTargetDirective_BaseFactory;\n  return function DropTargetDirective_Factory(t) {\n    return (ÉµDropTargetDirective_BaseFactory || (ÉµDropTargetDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DropTargetDirective)))(t || DropTargetDirective);\n  };\n}();\n\nDropTargetDirective.Éµdir = /*@__PURE__*/Éµngcc0.ÉµÉµdefineDirective({\n  type: DropTargetDirective,\n  selectors: [[\"\", \"dropTarget\", \"\"]],\n  inputs: {\n    dropTargetType: \"dropTargetType\",\n    dropTargetTypes: \"dropTargetTypes\",\n    dropTarget: \"dropTarget\"\n  },\n  features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature]\n});\nDropTargetDirective.propDecorators = {\n  dropTarget: [{\n    type: Input,\n    args: ['dropTarget']\n  }],\n  dropTargetTypes: [{\n    type: Input,\n    args: ['dropTargetTypes']\n  }],\n  dropTargetType: [{\n    type: Input,\n    args: ['dropTargetType']\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DropTargetDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[dropTarget]'\n    }]\n  }], null, {\n    dropTargetType: [{\n      type: Input,\n      args: ['dropTargetType']\n    }],\n    dropTargetTypes: [{\n      type: Input,\n      args: ['dropTargetTypes']\n    }],\n    dropTarget: [{\n      type: Input,\n      args: ['dropTarget']\n    }]\n  });\n})();\n\nif (false) {\n  /**\n   * @type {?}\n   * @protected\n   */\n  DropTargetDirective.prototype.connection;\n  /**\n   * Which target to connect the DOM to\n   * @type {?}\n   */\n\n  DropTargetDirective.prototype.dropTarget;\n  /**\n   * Shortcut for setting a type on the connection.\n   *  Lets you use Angular binding to do it. Runs {\\@link DropTarget#setTypes}.\n   * @type {?}\n   */\n\n  DropTargetDirective.prototype.dropTargetTypes;\n}\n/**\n * Allows you to connect a {\\@link DragSource} to an element in a component template.\n */\n\n\nclass DragSourceDirective extends DndDirective {\n  constructor() {\n    super(...arguments);\n    /**\n     * Do not render an HTML5 preview. Only applies when using the HTML5 backend.\n     * It does not use { captureDraggingState: true } for IE11 support; that is broken.\n     */\n\n    this.noHTML5Preview = false;\n  }\n  /**\n   * @protected\n   * @return {?}\n   */\n\n\n  ngOnChanges() {\n    this.connection = this.dragSource;\n\n    if (this.connection && this.dragSourceType != null) {\n      this.connection.setType(this.dragSourceType);\n    }\n\n    super.ngOnChanges();\n  }\n  /**\n   * @protected\n   * @param {?} conn\n   * @return {?}\n   */\n\n\n  callHooks(conn) {\n    /** @type {?} */\n    const sub = new Subscription();\n    sub.add(conn.connectDragSource(this.elRef.nativeElement, this.dragSourceOptions));\n\n    if (this.noHTML5Preview) {\n      sub.add(conn.connectDragPreview(getEmptyImage()));\n    }\n\n    return sub;\n  }\n\n}\n\nDragSourceDirective.Éµfac = /*@__PURE__*/function () {\n  let ÉµDragSourceDirective_BaseFactory;\n  return function DragSourceDirective_Factory(t) {\n    return (ÉµDragSourceDirective_BaseFactory || (ÉµDragSourceDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DragSourceDirective)))(t || DragSourceDirective);\n  };\n}();\n\nDragSourceDirective.Éµdir = /*@__PURE__*/Éµngcc0.ÉµÉµdefineDirective({\n  type: DragSourceDirective,\n  selectors: [[\"\", \"dragSource\", \"\"]],\n  inputs: {\n    noHTML5Preview: \"noHTML5Preview\",\n    dragSource: \"dragSource\",\n    dragSourceType: \"dragSourceType\",\n    dragSourceOptions: \"dragSourceOptions\"\n  },\n  features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature]\n});\nDragSourceDirective.propDecorators = {\n  dragSource: [{\n    type: Input,\n    args: ['dragSource']\n  }],\n  dragSourceType: [{\n    type: Input,\n    args: ['dragSourceType']\n  }],\n  dragSourceOptions: [{\n    type: Input,\n    args: ['dragSourceOptions']\n  }],\n  noHTML5Preview: [{\n    type: Input,\n    args: ['noHTML5Preview']\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DragSourceDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[dragSource]'\n    }]\n  }], null, {\n    noHTML5Preview: [{\n      type: Input,\n      args: ['noHTML5Preview']\n    }],\n    dragSource: [{\n      type: Input,\n      args: ['dragSource']\n    }],\n    dragSourceType: [{\n      type: Input,\n      args: ['dragSourceType']\n    }],\n    dragSourceOptions: [{\n      type: Input,\n      args: ['dragSourceOptions']\n    }]\n  });\n})();\n\nif (false) {\n  /**\n   * @type {?}\n   * @protected\n   */\n  DragSourceDirective.prototype.connection;\n  /**\n   * Which source to connect the DOM to\n   * @type {?}\n   */\n\n  DragSourceDirective.prototype.dragSource;\n  /**\n   * Shortcut for setting a type on the connection.\n   *  Lets you use Angular binding to do it. Runs {\\@link DragSource#setType}.\n   * @type {?}\n   */\n\n  DragSourceDirective.prototype.dragSourceType;\n  /**\n   * Pass an options object as you would to {\\@link DragSource#connectDragSource}.\n   * @type {?}\n   */\n\n  DragSourceDirective.prototype.dragSourceOptions;\n  /**\n   * Do not render an HTML5 preview. Only applies when using the HTML5 backend.\n   * It does not use { captureDraggingState: true } for IE11 support; that is broken.\n   * @type {?}\n   */\n\n  DragSourceDirective.prototype.noHTML5Preview;\n}\n/**\n * Allows you to specify which element a {\\@link DragSource} should screenshot as an HTML5 drag preview.\n *\n * Only relevant when using the HTML5 backend.\n */\n\n\nclass DragPreviewDirective extends DndDirective {\n  /**\n   * @protected\n   * @return {?}\n   */\n  ngOnChanges() {\n    this.connection = this.dragPreview;\n    super.ngOnChanges();\n  }\n  /**\n   * @protected\n   * @param {?} conn\n   * @return {?}\n   */\n\n\n  callHooks(conn) {\n    return conn.connectDragPreview(this.elRef.nativeElement, this.dragPreviewOptions);\n  }\n\n}\n\nDragPreviewDirective.Éµfac = /*@__PURE__*/function () {\n  let ÉµDragPreviewDirective_BaseFactory;\n  return function DragPreviewDirective_Factory(t) {\n    return (ÉµDragPreviewDirective_BaseFactory || (ÉµDragPreviewDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DragPreviewDirective)))(t || DragPreviewDirective);\n  };\n}();\n\nDragPreviewDirective.Éµdir = /*@__PURE__*/Éµngcc0.ÉµÉµdefineDirective({\n  type: DragPreviewDirective,\n  selectors: [[\"\", \"dragPreview\", \"\"]],\n  inputs: {\n    dragPreview: \"dragPreview\",\n    dragPreviewOptions: \"dragPreviewOptions\"\n  },\n  features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature]\n});\nDragPreviewDirective.propDecorators = {\n  dragPreview: [{\n    type: Input,\n    args: ['dragPreview']\n  }],\n  dragPreviewOptions: [{\n    type: Input,\n    args: ['dragPreviewOptions']\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DragPreviewDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[dragPreview]',\n      inputs: ['dragPreview', 'dragPreviewOptions']\n    }]\n  }], null, {\n    dragPreview: [{\n      type: Input,\n      args: ['dragPreview']\n    }],\n    dragPreviewOptions: [{\n      type: Input,\n      args: ['dragPreviewOptions']\n    }]\n  });\n})();\n\nif (false) {\n  /**\n   * @type {?}\n   * @protected\n   */\n  DragPreviewDirective.prototype.connection;\n  /**\n   * The drag source for which this element will be the preview.\n   * @type {?}\n   */\n\n  DragPreviewDirective.prototype.dragPreview;\n  /**\n   * Pass an options object as you would to {\\@link DragSource#connectDragPreview}.\n   * @type {?}\n   */\n\n  DragPreviewDirective.prototype.dragPreviewOptions;\n} // import { getEmptyImage } from 'react-dnd-html5-backend';\n// we don't want to depend on the backend, so here that is, copied\n\n/**\n * @ignore\n * @type {?}\n */\n\n\nlet emptyImage;\n/**\n * Returns a 0x0 empty GIF for use as a drag preview.\n * @ignore\n *\n * @return {?}\n */\n\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @ignore\n * @param {?} backendOrModule\n * @return {?}\n */\n\n\nfunction unpackBackendForEs5Users(backendOrModule) {\n  // Auto-detect ES6 default export for people still using ES5\n\n  /** @type {?} */\n  let backend = backendOrModule;\n\n  if (typeof backend === 'object' && typeof backend.default === 'function') {\n    backend = backend.default;\n  }\n\n  invariant(typeof backend === 'function', 'Expected the backend to be a function or an ES6 module exporting a default function. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html');\n  return backend;\n} // TODO allow injecting window\n\n/**\n * @ignore\n * @param {?} backendFactory\n * @param {?} zone\n * @param {?} context\n * @param {?=} backendOptions\n * @param {?=} debugMode\n * @return {?}\n */\n// @dynamic\n\n\nfunction managerFactory(backendFactory, zone, context, backendOptions, debugMode) {\n  backendFactory = unpackBackendForEs5Users(backendFactory);\n  return zone.runOutsideAngular(\n  /**\n  * @return {?}\n  */\n  () => createDragDropManager(backendFactory, context, backendOptions, debugMode));\n}\n/**\n * @ignore\n * @return {?}\n */\n\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global :\n  /** @type {?} */\n  window;\n}\n/**\n * Use this for providing plain backends to {\\@link SkyhookDndModule#forRoot}.\n * @record\n */\n\n\nfunction BackendInput() {}\n\nif (false) {\n  /**\n   * A plain backend, for example the HTML5Backend.\n   * @type {?}\n   */\n  BackendInput.prototype.backend;\n  /** @type {?|undefined} */\n\n  BackendInput.prototype.options;\n  /** @type {?|undefined} */\n\n  BackendInput.prototype.debug;\n}\n/**\n * Use this for providing backends that need configuring before use to {\\@link SkyhookDndModule#forRoot}.\n *\n * For use with the MultiBackend:\n *\n * ```typescript\n * import { createDefaultMultiBackend } from '\\@angular-skyhook/multi-backend';\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createDefaultMultiBackend })\n * ```\n *\n * or with the TouchBackend by itself:\n *\n * ```typescript\n * export function createTouchBackend() {\n *     return TouchBackend({ enableMouseEvents: false });\n * }\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createTouchBackend })\n * ```\n *\n * You have to do this to retain AOT compatibility.\n * @record\n */\n\n\nfunction BackendFactoryInput() {}\n\nif (false) {\n  /**\n   * See above.\n   * @type {?}\n   */\n  BackendFactoryInput.prototype.backendFactory;\n  /** @type {?|undefined} */\n\n  BackendFactoryInput.prototype.debug;\n}\n/**\n * @ignore\n * @type {?}\n */\n\n\nconst EXPORTS = [DragSourceDirective, DropTargetDirective, DragPreviewDirective]; // @dynamic\n\nclass SkyhookDndModule {\n  /**\n   * @param {?} backendOrBackendFactory\n   * @return {?}\n   */\n  static forRoot(backendOrBackendFactory) {\n    return {\n      ngModule: SkyhookDndModule,\n      providers: [{\n        provide: DRAG_DROP_BACKEND,\n        // whichever one they have provided, the other will be undefined\n        useValue:\n        /** @type {?} */\n        backendOrBackendFactory.backend,\n        useFactory:\n        /** @type {?} */\n        backendOrBackendFactory.backendFactory\n      }, {\n        provide: DRAG_DROP_BACKEND_OPTIONS,\n        // whichever one they have provided, the other will be undefined\n        useValue:\n        /** @type {?} */\n        backendOrBackendFactory.options\n      }, {\n        provide: DRAG_DROP_BACKEND_DEBUG_MODE,\n        // whichever one they have provided, the other will be undefined\n        useValue: backendOrBackendFactory.debug\n      }, {\n        provide: DRAG_DROP_GLOBAL_CONTEXT,\n        useFactory: getGlobalContext\n      }, {\n        provide: DRAG_DROP_MANAGER,\n        useFactory: managerFactory,\n        deps: [DRAG_DROP_BACKEND, NgZone, DRAG_DROP_GLOBAL_CONTEXT, DRAG_DROP_BACKEND_OPTIONS, DRAG_DROP_BACKEND_DEBUG_MODE]\n      }, SkyhookDndService]\n    };\n  }\n\n}\n\nSkyhookDndModule.Éµfac = function SkyhookDndModule_Factory(t) {\n  return new (t || SkyhookDndModule)();\n};\n\nSkyhookDndModule.Éµmod = /*@__PURE__*/Éµngcc0.ÉµÉµdefineNgModule({\n  type: SkyhookDndModule\n});\nSkyhookDndModule.Éµinj = /*@__PURE__*/Éµngcc0.ÉµÉµdefineInjector({});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(SkyhookDndModule, [{\n    type: NgModule,\n    args: [{\n      declarations: EXPORTS,\n      exports: EXPORTS\n    }]\n  }], null, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && Éµngcc0.ÉµÉµsetNgModuleScope(SkyhookDndModule, {\n    declarations: [DragSourceDirective, DropTargetDirective, DragPreviewDirective],\n    exports: [DragSourceDirective, DropTargetDirective, DragPreviewDirective]\n  });\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { DRAG_DROP_BACKEND, DRAG_DROP_MANAGER, DragPreviewDirective, DragSourceDirective, DropTargetDirective, SkyhookDndModule, SkyhookDndService, managerFactory as Éµa, getGlobalContext as Éµb, DRAG_DROP_BACKEND_OPTIONS as Éµc, DRAG_DROP_BACKEND_DEBUG_MODE as Éµd, DRAG_DROP_GLOBAL_CONTEXT as Éµe, DndDirective as Éµf };","map":{"version":3,"names":["InjectionToken","NgZone","Injectable","Inject","ElementRef","Directive","Input","NgModule","Subscriber","ReplaySubject","Subscription","BehaviorSubject","take","switchMapTo","map","distinctUntilChanged","createDragDropManager","Éµngcc0","DRAG_DROP_BACKEND","DRAG_DROP_BACKEND_OPTIONS","DRAG_DROP_BACKEND_DEBUG_MODE","DRAG_DROP_MANAGER","DRAG_DROP_GLOBAL_CONTEXT","TYPE_DYNAMIC","Symbol","shallowEqual","objA","objB","keysA","Object","keys","keysB","length","hasOwn","prototype","hasOwnProperty","i","call","valA","valB","areOptionsEqual","nextOptions","currentOptions","Reconnector","constructor","backendConnector","reconnect","parentHandlerId","disconnect","handlerId","node","options","hook","nativeElement","TargetConnector","backend","dropTarget","connectDropTarget","hooks","receiveHandlerId","currentHandlerId","createTargetConnector","registerTarget","type","target","manager","registry","getRegistry","targetId","addTarget","unregisterTarget","removeTarget","unregister","Connector","SourceConnector","dragSource","connectDragSource","dragPreview","connectDragPreview","createSourceConnector","registerSource","source","sourceId","addSource","unregisterSource","removeSource","invariant","assertion","msg","Error","areCollectsEqual","a","b","scheduleMicroTaskAfter","zone","uTask","lift","RunInZoneOperator","ZoneSubscriber","destination","_next","val","next","scheduleMicroTask","subscriber","subscribe","FactoryArgs","createHandler","createMonitor","createConnector","registerHandler","Connection","factoryArgs","skyhookZone","initialType","resolvedType$","subscriptionConnectionLifetime","onUpdate","handlerConnector","handleChange","collector$","handlerMonitor","assertNotInAngularZone","handler","getBackend","add","setTypes","listen","mapFn","pipe","connect","fn","subscription","run","c","receiveType","setType","getHandlerId","currentType","subscriptionTypeLifetime","unsubscribe","globalMonitor","getMonitor","subscribeToStateChange","handlerIds","teardown","closed","SourceConstructor","TargetConstructor","TargetConnection","SourceConnection","DragLayerConnectionClass","isTicking","handleStateChange","monitor","handleOffsetChange","unsubscribeFromOffsetChange","subscribeToOffsetChange","unsubscribeFromStateChange","complete","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorClass","internalMonitor","canDrag","canDragSource","isDragging","isDraggingSource","getItemType","getItem","getDropResult","didDrop","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","createSourceMonitor","Target","spec","withChangeDetection","x","receiveMonitor","canDrop","hover","drop","undefined","dropResult","createTargetFactory","createTarget","isCallingCanDrop","DropTargetMonitorClass","canDropOnTarget","isOver","shallow","isOverTarget","createTargetMonitor","Source","getSourceId","beginDrag","endDrag","createSourceFactory","createSource","AddSubscription","teardownLogic","SkyhookDndService","ngZone","Zone","root","fork","name","onHasTask","_parentZoneDelegate","_currentZone","_targetZone","state","change","types","conn","dragLayer","Éµfac","SkyhookDndService_Factory","t","ÉµÉµinject","Éµprov","ÉµÉµdefineInjectable","token","factory","ctorParameters","decorators","args","ngDevMode","ÉµsetClassMetadata","explanation","DndDirective","elRef","deferredRequest","ngOnChanges","connection","Array","isArray","runOutsideAngular","callHooks","ngOnDestroy","DndDirective_Factory","Éµdir","ÉµÉµdefineDirective","features","ÉµÉµNgOnChangesFeature","DropTargetDirective","dropTargetType","dropTargetTypes","ÉµDropTargetDirective_BaseFactory","DropTargetDirective_Factory","ÉµÉµgetInheritedFactory","selectors","inputs","ÉµÉµInheritDefinitionFeature","propDecorators","selector","DragSourceDirective","arguments","noHTML5Preview","dragSourceType","sub","dragSourceOptions","getEmptyImage","ÉµDragSourceDirective_BaseFactory","DragSourceDirective_Factory","DragPreviewDirective","dragPreviewOptions","ÉµDragPreviewDirective_BaseFactory","DragPreviewDirective_Factory","emptyImage","Image","src","unpackBackendForEs5Users","backendOrModule","default","managerFactory","backendFactory","context","backendOptions","debugMode","getGlobalContext","global","window","BackendInput","debug","BackendFactoryInput","EXPORTS","SkyhookDndModule","forRoot","backendOrBackendFactory","ngModule","providers","provide","useValue","useFactory","deps","SkyhookDndModule_Factory","Éµmod","ÉµÉµdefineNgModule","Éµinj","ÉµÉµdefineInjector","declarations","exports","ngJitMode","ÉµÉµsetNgModuleScope","Éµa","Éµb","Éµc","Éµd","Éµe","Éµf"],"sources":["/Users/ys-admin/Personal/todo_list_frontend/node_modules/@angular-skyhook/core/__ivy_ngcc__/fesm2015/angular-skyhook-core.js"],"sourcesContent":["import { InjectionToken, NgZone, Injectable, Inject, ElementRef, Directive, Input, NgModule } from '@angular/core';\nimport { Subscriber, ReplaySubject, Subscription, BehaviorSubject } from 'rxjs';\nimport { take, switchMapTo, map, distinctUntilChanged } from 'rxjs/operators';\nimport { createDragDropManager } from 'dnd-core';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\nimport * as Éµngcc0 from '@angular/core';\nconst DRAG_DROP_BACKEND = new InjectionToken('dnd-core compatible backend');\n/**\n * The injection token for the dnd-core compatible backend's options.\n * @type {?}\n */\nconst DRAG_DROP_BACKEND_OPTIONS = new InjectionToken('options for dnd-core compatible backend');\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\nconst DRAG_DROP_BACKEND_DEBUG_MODE = new InjectionToken('should dnd-core run in debug mode?');\n/**\n * The injection token for the dnd-core DragDropManager\n * @type {?}\n */\nconst DRAG_DROP_MANAGER = new InjectionToken('dnd-core DragDropManager');\n/**\n * The injection token for the dnd-core compatible backend currently in use.\n * @type {?}\n */\nconst DRAG_DROP_GLOBAL_CONTEXT = new InjectionToken('dnd-core context');\n/**\n * The type a source or target is given as a marker for 'you supplied null as a type',\n *  so that library consumers can be reminded to use setType/setTypes manually.\n *  See {\\@link DragSource#setType}, {\\@link DropTarget#setTypes}.\n * @type {?}\n */\nconst TYPE_DYNAMIC = Symbol('no type specified, you must provide one with setType/setTypes');\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} objA\n * @param {?} objB\n * @return {?}\n */\nfunction shallowEqual(objA, objB) {\n    if (objA === objB) {\n        return true;\n    }\n    /** @type {?} */\n    const keysA = Object.keys(objA);\n    /** @type {?} */\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n    // Test for A's keys different from B.\n    /** @type {?} */\n    const hasOwn = Object.prototype.hasOwnProperty;\n    for (let i = 0; i < keysA.length; i += 1) {\n        if (!hasOwn.call(objB, keysA[i]) ||\n            objA[keysA[i]] !== objB[keysA[i]]) {\n            return false;\n        }\n        /** @type {?} */\n        const valA = objA[keysA[i]];\n        /** @type {?} */\n        const valB = objB[keysA[i]];\n        if (valA !== valB) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} nextOptions\n * @param {?} currentOptions\n * @return {?}\n */\nfunction areOptionsEqual(nextOptions, currentOptions) {\n    if (currentOptions === nextOptions) {\n        return true;\n    }\n    return currentOptions !== null &&\n        nextOptions !== null &&\n        shallowEqual(currentOptions, nextOptions);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template O\n */\nclass Reconnector {\n    /**\n     * @param {?} backendConnector\n     */\n    constructor(backendConnector) {\n        this.backendConnector = backendConnector;\n        this.reconnect = (/**\n         * @param {?} parentHandlerId\n         * @return {?}\n         */\n        (parentHandlerId) => {\n            if (this.disconnect) {\n                this.disconnect();\n                this.disconnect = null;\n            }\n            this.handlerId = parentHandlerId;\n            if (this.handlerId && this.node) {\n                this.disconnect = this.backendConnector(this.handlerId, this.node, this.options);\n            }\n        });\n        this.hook = (/**\n         * @param {?} nativeElement\n         * @param {?=} options\n         * @return {?}\n         */\n        (nativeElement, options) => {\n            if (nativeElement === this.node &&\n                areOptionsEqual(options, this.options)) {\n                return;\n            }\n            this.node = nativeElement;\n            this.options = options;\n            this.reconnect(this.handlerId);\n        });\n    }\n}\nif (false) {\n    /** @type {?} */\n    Reconnector.prototype.handlerId;\n    /** @type {?} */\n    Reconnector.prototype.node;\n    /** @type {?} */\n    Reconnector.prototype.options;\n    /** @type {?} */\n    Reconnector.prototype.disconnect;\n    /** @type {?} */\n    Reconnector.prototype.reconnect;\n    /** @type {?} */\n    Reconnector.prototype.hook;\n    /**\n     * @type {?}\n     * @private\n     */\n    Reconnector.prototype.backendConnector;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass TargetConnector {\n    /**\n     * @param {?} backend\n     */\n    constructor(backend) {\n        this.backend = backend;\n        this.dropTarget = new Reconnector((/**\n         * @param {?} handlerId\n         * @param {?} node\n         * @param {?} options\n         * @return {?}\n         */\n        (handlerId, node, options) => {\n            return this.backend.connectDropTarget(handlerId, node, options);\n        }));\n        this.hooks = {\n            dropTarget: this.dropTarget.hook\n        };\n    }\n    /**\n     * @param {?} handlerId\n     * @return {?}\n     */\n    receiveHandlerId(handlerId) {\n        if (handlerId === this.currentHandlerId) {\n            return;\n        }\n        this.currentHandlerId = handlerId;\n        this.dropTarget.reconnect(handlerId);\n    }\n    /**\n     * @return {?}\n     */\n    reconnect() {\n        this.dropTarget.reconnect(this.currentHandlerId);\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    TargetConnector.prototype.currentHandlerId;\n    /**\n     * @type {?}\n     * @private\n     */\n    TargetConnector.prototype.dropTarget;\n    /** @type {?} */\n    TargetConnector.prototype.hooks;\n    /**\n     * @type {?}\n     * @private\n     */\n    TargetConnector.prototype.backend;\n}\n/**\n * @param {?} backend\n * @return {?}\n */\nfunction createTargetConnector(backend) {\n    return new TargetConnector(backend);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} type\n * @param {?} target\n * @param {?} manager\n * @return {?}\n */\nfunction registerTarget(type, target, manager) {\n    /** @type {?} */\n    const registry = manager.getRegistry();\n    /** @type {?} */\n    const targetId = registry.addTarget(type, target);\n    /**\n     * @return {?}\n     */\n    function unregisterTarget() {\n        registry.removeTarget(targetId);\n    }\n    return {\n        handlerId: targetId,\n        unregister: unregisterTarget,\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n * @template TConnector\n */\nfunction Connector() { }\nif (false) {\n    /** @type {?} */\n    Connector.prototype.hooks;\n    /**\n     * @param {?} handlerId\n     * @return {?}\n     */\n    Connector.prototype.receiveHandlerId = function (handlerId) { };\n    /**\n     * @return {?}\n     */\n    Connector.prototype.reconnect = function () { };\n}\nclass SourceConnector {\n    /**\n     * @param {?} backend\n     */\n    constructor(backend) {\n        this.backend = backend;\n        this.dragSource = new Reconnector((/**\n         * @param {?} handlerId\n         * @param {?} node\n         * @param {?} options\n         * @return {?}\n         */\n        (handlerId, node, options) => {\n            return this.backend.connectDragSource(handlerId, node, options);\n        }));\n        this.dragPreview = new Reconnector((/**\n         * @param {?} handlerId\n         * @param {?} node\n         * @param {?} options\n         * @return {?}\n         */\n        (handlerId, node, options) => {\n            return this.backend.connectDragPreview(handlerId, node, options);\n        }));\n        this.hooks = {\n            dragSource: this.dragSource.hook,\n            dragPreview: this.dragPreview.hook,\n        };\n    }\n    /**\n     * @param {?} handlerId\n     * @return {?}\n     */\n    receiveHandlerId(handlerId) {\n        if (handlerId === this.currentHandlerId) {\n            return;\n        }\n        this.currentHandlerId = handlerId;\n        this.dragSource.reconnect(handlerId);\n        this.dragPreview.reconnect(handlerId);\n    }\n    /**\n     * @return {?}\n     */\n    reconnect() {\n        this.dragSource.reconnect(this.currentHandlerId);\n        this.dragPreview.reconnect(this.currentHandlerId);\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    SourceConnector.prototype.currentHandlerId;\n    /**\n     * @type {?}\n     * @private\n     */\n    SourceConnector.prototype.dragSource;\n    /**\n     * @type {?}\n     * @private\n     */\n    SourceConnector.prototype.dragPreview;\n    /** @type {?} */\n    SourceConnector.prototype.hooks;\n    /**\n     * @type {?}\n     * @private\n     */\n    SourceConnector.prototype.backend;\n}\n/**\n * @param {?} backend\n * @return {?}\n */\nfunction createSourceConnector(backend) {\n    return new SourceConnector(backend);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} type\n * @param {?} source\n * @param {?} manager\n * @return {?}\n */\nfunction registerSource(type, source, manager) {\n    /** @type {?} */\n    const registry = manager.getRegistry();\n    /** @type {?} */\n    const sourceId = registry.addSource(type, source);\n    /**\n     * @return {?}\n     */\n    function unregisterSource() {\n        registry.removeSource(sourceId);\n    }\n    return {\n        handlerId: sourceId,\n        unregister: unregisterSource,\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} assertion\n * @param {?} msg\n * @return {?}\n */\nfunction invariant(assertion, msg) {\n    if (!assertion) {\n        throw new Error(msg);\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\nfunction areCollectsEqual(a, b) {\n    if (a == null || b == null) {\n        return false;\n    }\n    if (typeof a !== 'object' || typeof b !== 'object') {\n        return a === b;\n    }\n    return shallowEqual(a, b);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @ignore\n * This is an RxJS operator to schedule a microtask just after all\n * the synchronous subscribers have been processed.\n * It's useful because we use `microTasks !== 0` to determine when we are finished\n * processing all the listeners and are ready for Angular to perform change detection.\n * @template T\n * @param {?} zone\n * @param {?=} uTask\n * @return {?}\n */\nfunction scheduleMicroTaskAfter(zone, uTask) {\n    return (/**\n     * @param {?} source\n     * @return {?}\n     */\n    (source) => {\n        return source.lift(new RunInZoneOperator(zone, uTask));\n    });\n}\n/**\n * @ignore\n * @template T\n */\nclass ZoneSubscriber extends Subscriber {\n    /**\n     * @param {?} destination\n     * @param {?} zone\n     * @param {?=} uTask\n     */\n    constructor(destination, zone, uTask = ((/**\n     * @return {?}\n     */\n    () => { }))) {\n        super(destination);\n        this.zone = zone;\n        this.uTask = uTask;\n    }\n    /**\n     * @protected\n     * @param {?} val\n     * @return {?}\n     */\n    _next(val) {\n        this.destination.next && this.destination.next(val);\n        this.zone.scheduleMicroTask('ZoneSubscriber', this.uTask);\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    ZoneSubscriber.prototype.zone;\n    /**\n     * @type {?}\n     * @private\n     */\n    ZoneSubscriber.prototype.uTask;\n}\n/**\n * @ignore\n * @template T, R\n */\nclass RunInZoneOperator {\n    /**\n     * @param {?} zone\n     * @param {?=} uTask\n     */\n    constructor(zone, uTask) {\n        this.zone = zone;\n        this.uTask = uTask;\n    }\n    /**\n     * @param {?} subscriber\n     * @param {?} source\n     * @return {?}\n     */\n    call(subscriber, source) {\n        return source.subscribe(new ZoneSubscriber(subscriber, this.zone, this.uTask));\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    RunInZoneOperator.prototype.zone;\n    /**\n     * @type {?}\n     * @private\n     */\n    RunInZoneOperator.prototype.uTask;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n * @template TMonitor, TConnector\n */\nfunction FactoryArgs() { }\nif (false) {\n    /** @type {?} */\n    FactoryArgs.prototype.createHandler;\n    /** @type {?} */\n    FactoryArgs.prototype.createMonitor;\n    /** @type {?} */\n    FactoryArgs.prototype.createConnector;\n    /** @type {?} */\n    FactoryArgs.prototype.registerHandler;\n}\n/**\n * @template TMonitor, TConnector\n */\nclass Connection {\n    /**\n     * @param {?} factoryArgs\n     * @param {?} manager\n     * @param {?} skyhookZone\n     * @param {?} initialType\n     */\n    constructor(factoryArgs, manager, skyhookZone, initialType) {\n        this.factoryArgs = factoryArgs;\n        this.manager = manager;\n        this.skyhookZone = skyhookZone;\n        /**\n         * A subject basically used to kick off any observables waiting for a type to be set via setType/setTypes\n         */\n        this.resolvedType$ = new ReplaySubject(1);\n        /**\n         * This one lives exactly as long as the connection.\n         * It is responsible for disposing of the handlerConnector, and any internal listen() subscriptions.\n         */\n        this.subscriptionConnectionLifetime = new Subscription();\n        this.onUpdate = (/**\n         * @return {?}\n         */\n        () => {\n            this.handlerConnector.reconnect();\n        });\n        this.handleChange = (/**\n         * @return {?}\n         */\n        () => {\n            this.collector$.next(this.handlerMonitor);\n        });\n        invariant(typeof manager === 'object', \n        // TODO: update this mini-documentation\n        'Could not find the drag and drop manager in the context of %s. ' +\n            'Make sure to wrap the top-level component of your app with DragDropContext. '\n        // tslint:disable-next-line:max-line-length\n        // 'Read more: ',\n        );\n        NgZone.assertNotInAngularZone();\n        this.handlerMonitor = this.factoryArgs.createMonitor(this.manager);\n        this.collector$ = new BehaviorSubject(this.handlerMonitor);\n        this.handler = this.factoryArgs.createHandler(this.handlerMonitor);\n        this.handlerConnector = this.factoryArgs.createConnector(this.manager.getBackend());\n        // handlerConnector lives longer than any per-type subscription\n        this.subscriptionConnectionLifetime.add((/**\n         * @return {?}\n         */\n        () => this.handlerConnector.receiveHandlerId(null)));\n        if (initialType && initialType !== TYPE_DYNAMIC) {\n            this.setTypes(initialType);\n        }\n    }\n    /**\n     * @template P\n     * @param {?} mapFn\n     * @return {?}\n     */\n    listen(mapFn) {\n        // Listeners are generally around as long as the connection.\n        // This isn't 100% true, but there is no way of knowing (even if you ref-count it)\n        // when a component no longer needs it.\n        return this.resolvedType$.pipe(\n        // this ensures we don't start emitting values until there is a type resolved\n        take(1), \n        // switch our attention to the incoming firehose of 'something changed' events\n        switchMapTo(this.collector$), \n        // turn them into 'interesting state' via the monitor and a user-provided function\n        map(mapFn), \n        // don't emit EVERY time the firehose says something changed, only when the interesting state changes\n        distinctUntilChanged(areCollectsEqual), \n        // this schedules a single batch change detection run after all the listeners have heard their newest value\n        // thus all changes resulting from subscriptions to this are caught by the\n        // change detector.\n        scheduleMicroTaskAfter(this.skyhookZone, this.onUpdate));\n    }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n    connect(fn) {\n        /** @type {?} */\n        const subscription = this.resolvedType$.pipe(take(1)).subscribe((/**\n         * @return {?}\n         */\n        () => {\n            // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n            // will cause change detection (via executing a macro or event task)\n            this.skyhookZone.run((/**\n             * @return {?}\n             */\n            () => {\n                fn(this.handlerConnector.hooks);\n            }));\n        }));\n        // now chain this onto the connection's unsubscribe call.\n        // just in case you destroy your component before setting a type on anything\n        // i.e.:\n        // conn without a type\n        //     source = this.dnd.dragSource(null, { ... })\n        // manually connect to the DOM, which won't handle the returned subscription like the directive does\n        //     ngAfterViewInit() { this.source.connectDragSource(this.myDiv.nativeElement); }\n        // never set a type\n        // then destroy your component, the source, but not the connection request.\n        //     ngOnDestroy() { this.source.unsubscribe(); }\n        //\n        // without this, you would have a hanging resolvedType$.pipe(take(1)) subscription\n        // with this, it dies with the source's unsubscribe call.\n        //\n        // doesn't need this.subscriptionTypeLifetime, because pipe(take(1)) already does that\n        this.subscriptionConnectionLifetime.add(subscription);\n        return subscription;\n    }\n    /**\n     * @param {?} node\n     * @return {?}\n     */\n    connectDropTarget(node) {\n        return this.connect((/**\n         * @param {?} c\n         * @return {?}\n         */\n        c => ((/** @type {?} */ (((/** @type {?} */ (c)))))).dropTarget(node)));\n    }\n    /**\n     * @param {?} node\n     * @param {?} options\n     * @return {?}\n     */\n    connectDragSource(node, options) {\n        return this.connect((/**\n         * @param {?} c\n         * @return {?}\n         */\n        c => ((/** @type {?} */ (((/** @type {?} */ (c)))))).dragSource(node, options)));\n    }\n    /**\n     * @param {?} node\n     * @param {?} options\n     * @return {?}\n     */\n    connectDragPreview(node, options) {\n        return this.connect((/**\n         * @param {?} c\n         * @return {?}\n         */\n        c => ((/** @type {?} */ (((/** @type {?} */ (c)))))).dragPreview(node, options)));\n    }\n    /**\n     * @param {?} type\n     * @return {?}\n     */\n    setTypes(type) {\n        // must run inside skyhookZone, so things like timers firing after a long hover with touch backend\n        // will cause change detection (via executing a macro or event task)\n        this.skyhookZone.run((/**\n         * @return {?}\n         */\n        () => {\n            this.receiveType(type);\n            this.resolvedType$.next(1);\n        }));\n    }\n    /**\n     * @param {?} type\n     * @return {?}\n     */\n    setType(type) {\n        this.setTypes(type);\n    }\n    /**\n     * @return {?}\n     */\n    getHandlerId() {\n        return this.handlerId;\n    }\n    /**\n     * @param {?} type\n     * @return {?}\n     */\n    receiveType(type) {\n        if (type === this.currentType) {\n            return;\n        }\n        NgZone.assertNotInAngularZone();\n        this.currentType = type;\n        if (this.subscriptionTypeLifetime) {\n            this.subscriptionTypeLifetime.unsubscribe();\n        }\n        // console.debug('subscribed to ' + type.toString());\n        this.subscriptionTypeLifetime = new Subscription();\n        const { handlerId, unregister } = this.factoryArgs.registerHandler(type, this.handler, this.manager);\n        this.handlerId = handlerId;\n        this.handlerMonitor.receiveHandlerId(handlerId);\n        this.handlerConnector.receiveHandlerId(handlerId);\n        /** @type {?} */\n        const globalMonitor = this.manager.getMonitor();\n        /** @type {?} */\n        const unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, { handlerIds: [handlerId] });\n        this.subscriptionTypeLifetime.add(unsubscribe);\n        this.subscriptionTypeLifetime.add(unregister);\n        // this.subscriptionTypeLifetime.add(() => console.debug(\"unsubscribed from \" + type.toString()));\n    }\n    /**\n     * @return {?}\n     */\n    unsubscribe() {\n        if (this.subscriptionTypeLifetime) {\n            this.subscriptionTypeLifetime.unsubscribe();\n        }\n        this.subscriptionConnectionLifetime.unsubscribe();\n    }\n    /**\n     * @param {?} teardown\n     * @return {?}\n     */\n    add(teardown) {\n        return this.subscriptionConnectionLifetime.add(teardown);\n    }\n    /**\n     * @return {?}\n     */\n    get closed() {\n        return (this.subscriptionConnectionLifetime &&\n            this.subscriptionConnectionLifetime.closed);\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.handlerMonitor;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.handlerConnector;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.handler;\n    /**\n     * The stream of all change events from the internal subscription's handleChange\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.collector$;\n    /**\n     * A subject basically used to kick off any observables waiting for a type to be set via setType/setTypes\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.resolvedType$;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.currentType;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.handlerId;\n    /**\n     * This one is created and destroyed once per type or list of types.\n     * Because each time we change the type, we unsubscribe from the global state storage and\n     * re-subscribe with the new type.\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.subscriptionTypeLifetime;\n    /**\n     * This one lives exactly as long as the connection.\n     * It is responsible for disposing of the handlerConnector, and any internal listen() subscriptions.\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.subscriptionConnectionLifetime;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.onUpdate;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.handleChange;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.factoryArgs;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.manager;\n    /**\n     * @type {?}\n     * @private\n     */\n    Connection.prototype.skyhookZone;\n}\n/**\n * @record\n * @template Item, DropResult\n */\nfunction SourceConstructor() { }\n/**\n * @record\n */\nfunction TargetConstructor() { }\n/** @type {?} */\nconst TargetConnection = (/** @type {?} */ (Connection));\n/** @type {?} */\nconst SourceConnection = (/** @type {?} */ (Connection));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass DragLayerConnectionClass {\n    /**\n     * @param {?} manager\n     * @param {?} zone\n     */\n    constructor(manager, zone) {\n        this.manager = manager;\n        this.zone = zone;\n        this.subscription = new Subscription();\n        this.isTicking = false;\n        this.handleStateChange = (/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const monitor = (/** @type {?} */ (this.manager.getMonitor()));\n            this.collector$.next(monitor);\n        });\n        this.handleOffsetChange = (/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const monitor = (/** @type {?} */ (this.manager.getMonitor()));\n            this.collector$.next(monitor);\n        });\n        /** @type {?} */\n        const monitor = this.manager.getMonitor();\n        this.collector$ = new BehaviorSubject(monitor);\n        this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleOffsetChange);\n        this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleStateChange);\n        this.subscription.add((/**\n         * @return {?}\n         */\n        () => {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromStateChange();\n        }));\n        this.handleStateChange();\n    }\n    /**\n     * @template P\n     * @param {?} mapFn\n     * @return {?}\n     */\n    listen(mapFn) {\n        return this.collector$.pipe(map(mapFn), distinctUntilChanged(areCollectsEqual), scheduleMicroTaskAfter(this.zone));\n    }\n    /**\n     * @return {?}\n     */\n    unsubscribe() {\n        this.collector$.complete();\n        this.subscription.unsubscribe();\n    }\n    /**\n     * @param {?} teardown\n     * @return {?}\n     */\n    add(teardown) {\n        return this.subscription.add(teardown);\n    }\n    /**\n     * @return {?}\n     */\n    get closed() {\n        return this.subscription.closed;\n    }\n}\nif (false) {\n    /** @type {?} */\n    DragLayerConnectionClass.prototype.unsubscribeFromOffsetChange;\n    /** @type {?} */\n    DragLayerConnectionClass.prototype.unsubscribeFromStateChange;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.collector$;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.subscription;\n    /** @type {?} */\n    DragLayerConnectionClass.prototype.isTicking;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.handleStateChange;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.handleOffsetChange;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.manager;\n    /**\n     * @type {?}\n     * @private\n     */\n    DragLayerConnectionClass.prototype.zone;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nlet isCallingCanDrag = false;\n/** @type {?} */\nlet isCallingIsDragging = false;\nclass DragSourceMonitorClass {\n    /**\n     * @param {?} manager\n     */\n    constructor(manager) {\n        this.internalMonitor = manager.getMonitor();\n    }\n    /**\n     * @param {?} sourceId\n     * @return {?}\n     */\n    receiveHandlerId(sourceId) {\n        this.sourceId = sourceId;\n    }\n    /**\n     * @return {?}\n     */\n    canDrag() {\n        invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html');\n        try {\n            isCallingCanDrag = true;\n            return this.internalMonitor.canDragSource(this.sourceId);\n        }\n        finally {\n            isCallingCanDrag = false;\n        }\n    }\n    /**\n     * @return {?}\n     */\n    isDragging() {\n        invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html');\n        try {\n            isCallingIsDragging = true;\n            return this.internalMonitor.isDraggingSource(this.sourceId);\n        }\n        finally {\n            isCallingIsDragging = false;\n        }\n    }\n    /**\n     * @return {?}\n     */\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    /**\n     * @return {?}\n     */\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    /**\n     * @return {?}\n     */\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    /**\n     * @return {?}\n     */\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    /**\n     * @return {?}\n     */\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n}\nif (false) {\n    /** @type {?} */\n    DragSourceMonitorClass.prototype.internalMonitor;\n    /** @type {?} */\n    DragSourceMonitorClass.prototype.sourceId;\n}\n/**\n * @param {?} manager\n * @return {?}\n */\nfunction createSourceMonitor(manager) {\n    return new DragSourceMonitorClass(manager);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass Target {\n    /**\n     * @param {?} spec\n     * @param {?} zone\n     * @param {?} monitor\n     */\n    constructor(spec, zone, monitor) {\n        this.spec = spec;\n        this.zone = zone;\n        this.monitor = monitor;\n        this.monitor = monitor;\n    }\n    /**\n     * @template T\n     * @param {?} fn\n     * @return {?}\n     */\n    withChangeDetection(fn) {\n        /** @type {?} */\n        let x = fn();\n        this.zone.scheduleMicroTask('DropTarget', (/**\n         * @return {?}\n         */\n        () => { }));\n        return x;\n    }\n    /**\n     * @param {?} monitor\n     * @return {?}\n     */\n    receiveMonitor(monitor) {\n        this.monitor = monitor;\n    }\n    /**\n     * @return {?}\n     */\n    canDrop() {\n        if (!this.spec.canDrop) {\n            return true;\n        }\n        // don't run isDragging in the zone. Should be a pure function of `this`.\n        return this.spec.canDrop(this.monitor);\n    }\n    /**\n     * @return {?}\n     */\n    hover() {\n        if (!this.spec.hover) {\n            return;\n        }\n        this.withChangeDetection((/**\n         * @return {?}\n         */\n        () => {\n            this.spec.hover && this.spec.hover(this.monitor);\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    drop() {\n        if (!this.spec.drop) {\n            return undefined;\n        }\n        return this.withChangeDetection((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const dropResult = this.spec.drop && this.spec.drop(this.monitor);\n            return dropResult;\n        }));\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    Target.prototype.spec;\n    /**\n     * @type {?}\n     * @private\n     */\n    Target.prototype.zone;\n    /**\n     * @type {?}\n     * @private\n     */\n    Target.prototype.monitor;\n}\n/**\n * @param {?} spec\n * @param {?} zone\n * @return {?}\n */\nfunction createTargetFactory(spec, zone) {\n    return (/**\n     * @param {?} monitor\n     * @return {?}\n     */\n    function createTarget(monitor) {\n        return new Target(spec, zone, monitor);\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nlet isCallingCanDrop = false;\nclass DropTargetMonitorClass {\n    /**\n     * @param {?} manager\n     */\n    constructor(manager) {\n        this.internalMonitor = manager.getMonitor();\n    }\n    /**\n     * @param {?} targetId\n     * @return {?}\n     */\n    receiveHandlerId(targetId) {\n        this.targetId = targetId;\n    }\n    /**\n     * @return {?}\n     */\n    canDrop() {\n        invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n            'Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html');\n        try {\n            isCallingCanDrop = true;\n            return this.internalMonitor.canDropOnTarget(this.targetId);\n        }\n        finally {\n            isCallingCanDrop = false;\n        }\n    }\n    /**\n     * @param {?=} options\n     * @return {?}\n     */\n    isOver(options = { shallow: false }) {\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n    /**\n     * @return {?}\n     */\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    /**\n     * @return {?}\n     */\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    /**\n     * @return {?}\n     */\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    /**\n     * @return {?}\n     */\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    /**\n     * @return {?}\n     */\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    /**\n     * @return {?}\n     */\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n}\nif (false) {\n    /** @type {?} */\n    DropTargetMonitorClass.prototype.internalMonitor;\n    /** @type {?} */\n    DropTargetMonitorClass.prototype.targetId;\n}\n/**\n * @param {?} manager\n * @return {?}\n */\nfunction createTargetMonitor(manager) {\n    return new DropTargetMonitorClass(manager);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass Source {\n    /**\n     * @param {?} spec\n     * @param {?} zone\n     * @param {?} monitor\n     */\n    constructor(spec, zone, monitor) {\n        this.spec = spec;\n        this.zone = zone;\n        this.monitor = monitor;\n    }\n    /**\n     * @template T\n     * @param {?} fn\n     * @return {?}\n     */\n    withChangeDetection(fn) {\n        /** @type {?} */\n        let x = fn();\n        this.zone.scheduleMicroTask('DragSource', (/**\n         * @return {?}\n         */\n        () => { }));\n        return x;\n    }\n    /**\n     * @return {?}\n     */\n    canDrag() {\n        if (!this.spec.canDrag) {\n            return true;\n        }\n        return this.withChangeDetection((/**\n         * @return {?}\n         */\n        () => {\n            return this.spec.canDrag && this.spec.canDrag(this.monitor) || false;\n        }));\n    }\n    /**\n     * @param {?} globalMonitor\n     * @param {?} sourceId\n     * @return {?}\n     */\n    isDragging(globalMonitor, sourceId) {\n        if (!this.spec.isDragging) {\n            return sourceId === globalMonitor.getSourceId();\n        }\n        return this.spec.isDragging(this.monitor);\n    }\n    /**\n     * @return {?}\n     */\n    beginDrag() {\n        return this.withChangeDetection((/**\n         * @return {?}\n         */\n        () => {\n            return this.spec.beginDrag(this.monitor);\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    endDrag() {\n        if (!this.spec.endDrag) {\n            return;\n        }\n        return this.withChangeDetection((/**\n         * @return {?}\n         */\n        () => {\n            if (this.spec.endDrag) {\n                this.spec.endDrag(this.monitor);\n            }\n        }));\n    }\n}\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    Source.prototype.spec;\n    /**\n     * @type {?}\n     * @private\n     */\n    Source.prototype.zone;\n    /**\n     * @type {?}\n     * @private\n     */\n    Source.prototype.monitor;\n}\n/**\n * @param {?} spec\n * @param {?} zone\n * @return {?}\n */\nfunction createSourceFactory(spec, zone) {\n    return (/**\n     * @param {?} monitor\n     * @return {?}\n     */\n    function createSource(monitor) {\n        return new Source(spec, zone, monitor);\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Represents an RxJS Subscription, with multi-version compatibility.\n * The standard SubscriptionLike does not contain an add() method.\n * @record\n */\nfunction AddSubscription() { }\nif (false) {\n    /**\n     * Same as RxJS `Subscription#add`\n     * @param {?} teardownLogic\n     * @return {?}\n     */\n    AddSubscription.prototype.add = function (teardownLogic) { };\n}\n/**\n * For a simple component, unsubscribing is as easy as `connection.unsubscribe()` in `ngOnDestroy()`\n *  If your components have lots of subscriptions, it can get tedious having to\n *  unsubscribe from all of them, and you might forget. A common pattern is to create an RxJS Subscription\n *  (maybe called `destroy`), to use `this.destroy.add(xxx.subscribe(...))`\n *  and to call `destroy.unsubscribe()` once to clean up all of them. \\@angular-skyhook/core\n *  supports this pattern with by using the `subscription` parameter on the\n *  constructors. Simply:\n *\n * ```typescript\n * import { Subscription } from 'rxjs';\n * // ...\n * destroy = new Subscription();\n * target = this.dnd.dropTarget({\n * // ...\n * }, this.destroy);\n * ngOnDestroy() { this.destroy.unsubscribe(); }\n * ```\n *\n * It is a good habit for avoiding leaked subscriptions, because .\n */\nclass SkyhookDndService {\n    /**\n     * @ignore\n     * @param {?} manager\n     * @param {?} ngZone\n     */\n    constructor(manager, ngZone) {\n        this.manager = manager;\n        this.ngZone = ngZone;\n        /**\n         * @ignore\n         */\n        this.skyhookZone = Zone.root.fork({\n            name: \"skyhookZone\",\n            onHasTask: (/**\n             * @param {?} _parentZoneDelegate\n             * @param {?} _currentZone\n             * @param {?} _targetZone\n             * @param {?} state\n             * @return {?}\n             */\n            (_parentZoneDelegate, _currentZone, _targetZone, state) => {\n                // when we've | drained the microTask queue; or                    | ... run a change detection cycle.\n                //            | executed or cancelled a macroTask (eg a timer); or |\n                //            | handled an event                                   |\n                // note: we must use ngZone.run() instead of ApplicationRef.tick()\n                // this is because\n                // 1. this callback runs outside the angular zone\n                // 2. therefore if you use appRef.tick(), the event handlers set up during the tick() are\n                //    not in the angular zone, even though anything set up during tick() should be\n                // 3. therefore you get regular (click) handlers from templates running in skyhookZone\n                //    and not causing change detection\n                // Also, now we watch for macroTasks as well.\n                // This means if we set up timers in the skyhook zone, they will fire and cause change\n                // detection. Useful if doing .listen(...).delay(1000) and the resulting asynchronous\n                // subscribers.\n                // Appropriately, we run more setup handlers in skyhookZone now.\n                //\n                // Proper event handlers (set up by the backend) don't trigger any, because skyhookZone\n                // only cares about # of handlers changing => 0. But if we care about them, it will be\n                // through listen(), updates to which will schedule a microTask.\n                if (!state[state.change]) {\n                    this.ngZone.run((/**\n                     * @return {?}\n                     */\n                    () => {\n                        // noop, but causes change detection (i.e. onLeave)\n                    }));\n                }\n            })\n            // onInvokeTask: (zoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) => {\n            // }\n            // onScheduleTask(parentZoneDelegate, currentZone, targetZone, task) {\n            //   return parentZoneDelegate.scheduleTask(targetZone, task);\n            // },\n            // onInvoke: (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) => {\n            // }\n        });\n    }\n    /**\n     * This drop target will only react to the items produced by the drag sources\n     * of the specified type or types.\n     *\n     * If you want a dynamic type, pass `null` as the type; and call\n     * {\\@link DropTarget#setTypes} in a lifecycle hook.\n     * @template Item, DropResult\n     * @param {?} types\n     * @param {?} spec\n     * @param {?=} subscription\n     * @return {?}\n     */\n    dropTarget(types, spec, subscription) {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const createTarget = createTargetFactory(spec, this.skyhookZone);\n            /** @type {?} */\n            const conn = new TargetConnection({\n                createHandler: createTarget,\n                registerHandler: registerTarget,\n                createMonitor: createTargetMonitor,\n                createConnector: createTargetConnector\n            }, this.manager, this.skyhookZone, types || TYPE_DYNAMIC);\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        }));\n    }\n    /**\n     * This method creates a {\\@link DragSource} object. It represents a drag\n     *  source and its behaviour, and can be connected to a DOM element by\n     *  assigning it to the `[dragSource]` directive on that element in your\n     *  template.\n     *\n     * It is the corollary of [`react-dnd`'s\n     * `DragSource`](http://react-dnd.github.io/react-dnd/docs-drag-source.html).\n     *\n     * The `spec` argument ({\\@link DragSourceSpec}) is a set of _queries_ and\n     * _callbacks_ that are called at appropriate times by the internals. The\n     * queries are for asking your component whether to drag/listen and what\n     * item data to hoist up; the callback (just 1) is for notifying you when\n     * the drag ends.\n     *\n     * Only the drop targets registered for the same type will\n     * react to the items produced by this drag source. If you want a dynamic\n     * type, pass `null` as the type; and call {\\@link DragSource#setType} in\n     * a lifecycle hook.\n     *\n     * @template Item, DropResult\n     * @param {?} type\n     * @param {?} spec\n     * @param {?=} subscription An RxJS Subscription to tie the lifetime of the\n     * connection to.\n     * @return {?}\n     */\n    dragSource(type, spec, subscription) {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const createSource = createSourceFactory(spec, this.skyhookZone);\n            /** @type {?} */\n            const conn = new SourceConnection({\n                createHandler: createSource,\n                registerHandler: registerSource,\n                createMonitor: createSourceMonitor,\n                createConnector: createSourceConnector\n            }, this.manager, this.skyhookZone, type || TYPE_DYNAMIC);\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        }));\n    }\n    /**\n     * This method creates a {\\@link DragLayer} object\n     * @template Item\n     * @param {?=} subscription\n     * @return {?}\n     */\n    dragLayer(subscription) {\n        // return this.ngZone.runOutsideAngular(() => {\n        return this.skyhookZone.run((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const conn = new DragLayerConnectionClass(this.manager, this.skyhookZone);\n            if (subscription) {\n                subscription.add(conn);\n            }\n            return conn;\n        }));\n    }\n}\nSkyhookDndService.Éµfac = function SkyhookDndService_Factory(t) { return new (t || SkyhookDndService)(Éµngcc0.ÉµÉµinject(DRAG_DROP_MANAGER), Éµngcc0.ÉµÉµinject(Éµngcc0.NgZone)); };\nSkyhookDndService.Éµprov = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineInjectable({ token: SkyhookDndService, factory: SkyhookDndService.Éµfac });\n/** @nocollapse */\nSkyhookDndService.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DRAG_DROP_MANAGER,] }] },\n    { type: NgZone }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(SkyhookDndService, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DRAG_DROP_MANAGER]\n            }] }, { type: Éµngcc0.NgZone }]; }, null); })();\nif (false) {\n    /**\n     * @ignore\n     * @type {?}\n     * @private\n     */\n    SkyhookDndService.prototype.skyhookZone;\n    /**\n     * @type {?}\n     * @private\n     */\n    SkyhookDndService.prototype.manager;\n    /**\n     * @type {?}\n     * @private\n     */\n    SkyhookDndService.prototype.ngZone;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @ignore\n * @type {?}\n */\nconst explanation = 'You can only pass exactly one connection object to [dropTarget]. ' +\n    'There is only one of each source/target/preview allowed per DOM element.';\n/**\n * @ignore\n * @abstract\n */\nclass DndDirective {\n    /**\n     * @ignore\n     * @param {?} elRef\n     * @param {?} zone\n     */\n    constructor(elRef, zone) {\n        this.elRef = elRef;\n        this.zone = zone;\n        this.deferredRequest = new Subscription();\n    }\n    /**\n     * @protected\n     * @return {?}\n     */\n    ngOnChanges() {\n        invariant(typeof this.connection === 'object' && !Array.isArray(this.connection), explanation);\n        this.zone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            // discard an unresolved connection request\n            // in the case where the previous one succeeded, deferredRequest is\n            // already closed.\n            this.deferredRequest.unsubscribe();\n            // replace it with a new one\n            if (this.connection) {\n                this.deferredRequest = this.callHooks(this.connection);\n            }\n        }));\n    }\n    /**\n     * @protected\n     * @return {?}\n     */\n    ngOnDestroy() { this.deferredRequest.unsubscribe(); }\n}\nDndDirective.Éµfac = function DndDirective_Factory(t) { return new (t || DndDirective)(Éµngcc0.ÉµÉµinject(Éµngcc0.ElementRef), Éµngcc0.ÉµÉµinject(Éµngcc0.NgZone)); };\nDndDirective.Éµprov = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineInjectable({ token: DndDirective, factory: DndDirective.Éµfac });\nDndDirective.Éµdir = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineDirective({ type: DndDirective, features: [Éµngcc0.ÉµÉµNgOnChangesFeature] });\n/** @nocollapse */\nDndDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgZone }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DndDirective, [{\n        type: Injectable\n    }], function () { return [{ type: Éµngcc0.ElementRef }, { type: Éµngcc0.NgZone }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DndDirective, [{\n        type: Injectable\n    }], function () { return [{ type: Éµngcc0.ElementRef }, { type: Éµngcc0.NgZone }]; }, null); })();\nif (false) {\n    /**\n     * @type {?}\n     * @protected\n     */\n    DndDirective.prototype.connection;\n    /**\n     * @type {?}\n     * @private\n     */\n    DndDirective.prototype.deferredRequest;\n    /**\n     * @type {?}\n     * @protected\n     */\n    DndDirective.prototype.elRef;\n    /**\n     * @type {?}\n     * @private\n     */\n    DndDirective.prototype.zone;\n    /**\n     * @abstract\n     * @protected\n     * @param {?} conn\n     * @return {?}\n     */\n    DndDirective.prototype.callHooks = function (conn) { };\n}\n// Note: the T | undefined everywhere is from https://github.com/angular/angular-cli/issues/2034\n/**\n * Allows you to connect a {\\@link DropTarget} to an element in a component template.\n */\nclass DropTargetDirective extends DndDirective {\n    /**\n     * Reduce typo confusion by allowing non-plural version of dropTargetTypes\n     * @param {?} t\n     * @return {?}\n     */\n    set dropTargetType(t) {\n        this.dropTargetTypes = t;\n    }\n    /**\n     * @protected\n     * @return {?}\n     */\n    ngOnChanges() {\n        this.connection = this.dropTarget;\n        if (this.connection && this.dropTargetTypes != null) {\n            this.connection.setTypes(this.dropTargetTypes);\n        }\n        super.ngOnChanges();\n    }\n    /**\n     * @protected\n     * @param {?} conn\n     * @return {?}\n     */\n    callHooks(conn) {\n        return conn.connectDropTarget(this.elRef.nativeElement);\n    }\n}\nDropTargetDirective.Éµfac = /*@__PURE__*/ function () { let ÉµDropTargetDirective_BaseFactory; return function DropTargetDirective_Factory(t) { return (ÉµDropTargetDirective_BaseFactory || (ÉµDropTargetDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DropTargetDirective)))(t || DropTargetDirective); }; }();\nDropTargetDirective.Éµdir = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineDirective({ type: DropTargetDirective, selectors: [[\"\", \"dropTarget\", \"\"]], inputs: { dropTargetType: \"dropTargetType\", dropTargetTypes: \"dropTargetTypes\", dropTarget: \"dropTarget\" }, features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature] });\nDropTargetDirective.propDecorators = {\n    dropTarget: [{ type: Input, args: ['dropTarget',] }],\n    dropTargetTypes: [{ type: Input, args: ['dropTargetTypes',] }],\n    dropTargetType: [{ type: Input, args: ['dropTargetType',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DropTargetDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[dropTarget]'\n            }]\n    }], null, { dropTargetType: [{\n            type: Input,\n            args: ['dropTargetType']\n        }], dropTargetTypes: [{\n            type: Input,\n            args: ['dropTargetTypes']\n        }], dropTarget: [{\n            type: Input,\n            args: ['dropTarget']\n        }] }); })();\nif (false) {\n    /**\n     * @type {?}\n     * @protected\n     */\n    DropTargetDirective.prototype.connection;\n    /**\n     * Which target to connect the DOM to\n     * @type {?}\n     */\n    DropTargetDirective.prototype.dropTarget;\n    /**\n     * Shortcut for setting a type on the connection.\n     *  Lets you use Angular binding to do it. Runs {\\@link DropTarget#setTypes}.\n     * @type {?}\n     */\n    DropTargetDirective.prototype.dropTargetTypes;\n}\n/**\n * Allows you to connect a {\\@link DragSource} to an element in a component template.\n */\nclass DragSourceDirective extends DndDirective {\n    constructor() {\n        super(...arguments);\n        /**\n         * Do not render an HTML5 preview. Only applies when using the HTML5 backend.\n         * It does not use { captureDraggingState: true } for IE11 support; that is broken.\n         */\n        this.noHTML5Preview = false;\n    }\n    /**\n     * @protected\n     * @return {?}\n     */\n    ngOnChanges() {\n        this.connection = this.dragSource;\n        if (this.connection && this.dragSourceType != null) {\n            this.connection.setType(this.dragSourceType);\n        }\n        super.ngOnChanges();\n    }\n    /**\n     * @protected\n     * @param {?} conn\n     * @return {?}\n     */\n    callHooks(conn) {\n        /** @type {?} */\n        const sub = new Subscription();\n        sub.add(conn.connectDragSource(this.elRef.nativeElement, this.dragSourceOptions));\n        if (this.noHTML5Preview) {\n            sub.add(conn.connectDragPreview(getEmptyImage()));\n        }\n        return sub;\n    }\n}\nDragSourceDirective.Éµfac = /*@__PURE__*/ function () { let ÉµDragSourceDirective_BaseFactory; return function DragSourceDirective_Factory(t) { return (ÉµDragSourceDirective_BaseFactory || (ÉµDragSourceDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DragSourceDirective)))(t || DragSourceDirective); }; }();\nDragSourceDirective.Éµdir = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineDirective({ type: DragSourceDirective, selectors: [[\"\", \"dragSource\", \"\"]], inputs: { noHTML5Preview: \"noHTML5Preview\", dragSource: \"dragSource\", dragSourceType: \"dragSourceType\", dragSourceOptions: \"dragSourceOptions\" }, features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature] });\nDragSourceDirective.propDecorators = {\n    dragSource: [{ type: Input, args: ['dragSource',] }],\n    dragSourceType: [{ type: Input, args: ['dragSourceType',] }],\n    dragSourceOptions: [{ type: Input, args: ['dragSourceOptions',] }],\n    noHTML5Preview: [{ type: Input, args: ['noHTML5Preview',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DragSourceDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[dragSource]'\n            }]\n    }], null, { noHTML5Preview: [{\n            type: Input,\n            args: ['noHTML5Preview']\n        }], dragSource: [{\n            type: Input,\n            args: ['dragSource']\n        }], dragSourceType: [{\n            type: Input,\n            args: ['dragSourceType']\n        }], dragSourceOptions: [{\n            type: Input,\n            args: ['dragSourceOptions']\n        }] }); })();\nif (false) {\n    /**\n     * @type {?}\n     * @protected\n     */\n    DragSourceDirective.prototype.connection;\n    /**\n     * Which source to connect the DOM to\n     * @type {?}\n     */\n    DragSourceDirective.prototype.dragSource;\n    /**\n     * Shortcut for setting a type on the connection.\n     *  Lets you use Angular binding to do it. Runs {\\@link DragSource#setType}.\n     * @type {?}\n     */\n    DragSourceDirective.prototype.dragSourceType;\n    /**\n     * Pass an options object as you would to {\\@link DragSource#connectDragSource}.\n     * @type {?}\n     */\n    DragSourceDirective.prototype.dragSourceOptions;\n    /**\n     * Do not render an HTML5 preview. Only applies when using the HTML5 backend.\n     * It does not use { captureDraggingState: true } for IE11 support; that is broken.\n     * @type {?}\n     */\n    DragSourceDirective.prototype.noHTML5Preview;\n}\n/**\n * Allows you to specify which element a {\\@link DragSource} should screenshot as an HTML5 drag preview.\n *\n * Only relevant when using the HTML5 backend.\n */\nclass DragPreviewDirective extends DndDirective {\n    /**\n     * @protected\n     * @return {?}\n     */\n    ngOnChanges() {\n        this.connection = this.dragPreview;\n        super.ngOnChanges();\n    }\n    /**\n     * @protected\n     * @param {?} conn\n     * @return {?}\n     */\n    callHooks(conn) {\n        return conn.connectDragPreview(this.elRef.nativeElement, this.dragPreviewOptions);\n    }\n}\nDragPreviewDirective.Éµfac = /*@__PURE__*/ function () { let ÉµDragPreviewDirective_BaseFactory; return function DragPreviewDirective_Factory(t) { return (ÉµDragPreviewDirective_BaseFactory || (ÉµDragPreviewDirective_BaseFactory = Éµngcc0.ÉµÉµgetInheritedFactory(DragPreviewDirective)))(t || DragPreviewDirective); }; }();\nDragPreviewDirective.Éµdir = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineDirective({ type: DragPreviewDirective, selectors: [[\"\", \"dragPreview\", \"\"]], inputs: { dragPreview: \"dragPreview\", dragPreviewOptions: \"dragPreviewOptions\" }, features: [Éµngcc0.ÉµÉµInheritDefinitionFeature, Éµngcc0.ÉµÉµNgOnChangesFeature] });\nDragPreviewDirective.propDecorators = {\n    dragPreview: [{ type: Input, args: ['dragPreview',] }],\n    dragPreviewOptions: [{ type: Input, args: ['dragPreviewOptions',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(DragPreviewDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[dragPreview]',\n                inputs: ['dragPreview', 'dragPreviewOptions']\n            }]\n    }], null, { dragPreview: [{\n            type: Input,\n            args: ['dragPreview']\n        }], dragPreviewOptions: [{\n            type: Input,\n            args: ['dragPreviewOptions']\n        }] }); })();\nif (false) {\n    /**\n     * @type {?}\n     * @protected\n     */\n    DragPreviewDirective.prototype.connection;\n    /**\n     * The drag source for which this element will be the preview.\n     * @type {?}\n     */\n    DragPreviewDirective.prototype.dragPreview;\n    /**\n     * Pass an options object as you would to {\\@link DragSource#connectDragPreview}.\n     * @type {?}\n     */\n    DragPreviewDirective.prototype.dragPreviewOptions;\n}\n// import { getEmptyImage } from 'react-dnd-html5-backend';\n// we don't want to depend on the backend, so here that is, copied\n/**\n * @ignore\n * @type {?}\n */\nlet emptyImage;\n/**\n * Returns a 0x0 empty GIF for use as a drag preview.\n * @ignore\n *\n * @return {?}\n */\nfunction getEmptyImage() {\n    if (!emptyImage) {\n        emptyImage = new Image();\n        emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n    }\n    return emptyImage;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @ignore\n * @param {?} backendOrModule\n * @return {?}\n */\nfunction unpackBackendForEs5Users(backendOrModule) {\n    // Auto-detect ES6 default export for people still using ES5\n    /** @type {?} */\n    let backend = backendOrModule;\n    if (typeof backend === 'object' && typeof backend.default === 'function') {\n        backend = backend.default;\n    }\n    invariant(typeof backend === 'function', 'Expected the backend to be a function or an ES6 module exporting a default function. ' +\n        'Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html');\n    return backend;\n}\n// TODO allow injecting window\n/**\n * @ignore\n * @param {?} backendFactory\n * @param {?} zone\n * @param {?} context\n * @param {?=} backendOptions\n * @param {?=} debugMode\n * @return {?}\n */\n// @dynamic\nfunction managerFactory(backendFactory, zone, context, backendOptions, debugMode) {\n    backendFactory = unpackBackendForEs5Users(backendFactory);\n    return zone.runOutsideAngular((/**\n     * @return {?}\n     */\n    () => createDragDropManager(backendFactory, context, backendOptions, debugMode)));\n}\n/**\n * @ignore\n * @return {?}\n */\nfunction getGlobalContext() {\n    return typeof global !== 'undefined' ? global : ((/** @type {?} */ (window)));\n}\n/**\n * Use this for providing plain backends to {\\@link SkyhookDndModule#forRoot}.\n * @record\n */\nfunction BackendInput() { }\nif (false) {\n    /**\n     * A plain backend, for example the HTML5Backend.\n     * @type {?}\n     */\n    BackendInput.prototype.backend;\n    /** @type {?|undefined} */\n    BackendInput.prototype.options;\n    /** @type {?|undefined} */\n    BackendInput.prototype.debug;\n}\n/**\n * Use this for providing backends that need configuring before use to {\\@link SkyhookDndModule#forRoot}.\n *\n * For use with the MultiBackend:\n *\n * ```typescript\n * import { createDefaultMultiBackend } from '\\@angular-skyhook/multi-backend';\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createDefaultMultiBackend })\n * ```\n *\n * or with the TouchBackend by itself:\n *\n * ```typescript\n * export function createTouchBackend() {\n *     return TouchBackend({ enableMouseEvents: false });\n * }\n * // ...\n * SkyhookDndModule.forRoot({ backendFactory: createTouchBackend })\n * ```\n *\n * You have to do this to retain AOT compatibility.\n * @record\n */\nfunction BackendFactoryInput() { }\nif (false) {\n    /**\n     * See above.\n     * @type {?}\n     */\n    BackendFactoryInput.prototype.backendFactory;\n    /** @type {?|undefined} */\n    BackendFactoryInput.prototype.debug;\n}\n/**\n * @ignore\n * @type {?}\n */\nconst EXPORTS = [\n    DragSourceDirective,\n    DropTargetDirective,\n    DragPreviewDirective,\n];\n// @dynamic\nclass SkyhookDndModule {\n    /**\n     * @param {?} backendOrBackendFactory\n     * @return {?}\n     */\n    static forRoot(backendOrBackendFactory) {\n        return {\n            ngModule: SkyhookDndModule,\n            providers: [\n                {\n                    provide: DRAG_DROP_BACKEND,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: ((/** @type {?} */ (backendOrBackendFactory))).backend,\n                    useFactory: ((/** @type {?} */ (backendOrBackendFactory)))\n                        .backendFactory,\n                },\n                {\n                    provide: DRAG_DROP_BACKEND_OPTIONS,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: ((/** @type {?} */ (backendOrBackendFactory))).options,\n                },\n                {\n                    provide: DRAG_DROP_BACKEND_DEBUG_MODE,\n                    // whichever one they have provided, the other will be undefined\n                    useValue: backendOrBackendFactory.debug,\n                },\n                {\n                    provide: DRAG_DROP_GLOBAL_CONTEXT,\n                    useFactory: getGlobalContext,\n                },\n                {\n                    provide: DRAG_DROP_MANAGER,\n                    useFactory: managerFactory,\n                    deps: [\n                        DRAG_DROP_BACKEND,\n                        NgZone,\n                        DRAG_DROP_GLOBAL_CONTEXT,\n                        DRAG_DROP_BACKEND_OPTIONS,\n                        DRAG_DROP_BACKEND_DEBUG_MODE,\n                    ],\n                },\n                SkyhookDndService,\n            ]\n        };\n    }\n}\nSkyhookDndModule.Éµfac = function SkyhookDndModule_Factory(t) { return new (t || SkyhookDndModule)(); };\nSkyhookDndModule.Éµmod = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineNgModule({ type: SkyhookDndModule });\nSkyhookDndModule.Éµinj = /*@__PURE__*/ Éµngcc0.ÉµÉµdefineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(SkyhookDndModule, [{\n        type: NgModule,\n        args: [{\n                declarations: EXPORTS,\n                exports: EXPORTS\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && Éµngcc0.ÉµÉµsetNgModuleScope(SkyhookDndModule, { declarations: [DragSourceDirective, DropTargetDirective, DragPreviewDirective], exports: [DragSourceDirective, DropTargetDirective, DragPreviewDirective] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { DRAG_DROP_BACKEND, DRAG_DROP_MANAGER, DragPreviewDirective, DragSourceDirective, DropTargetDirective, SkyhookDndModule, SkyhookDndService, managerFactory as Éµa, getGlobalContext as Éµb, DRAG_DROP_BACKEND_OPTIONS as Éµc, DRAG_DROP_BACKEND_DEBUG_MODE as Éµd, DRAG_DROP_GLOBAL_CONTEXT as Éµe, DndDirective as Éµf };\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}